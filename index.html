<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…Ø¯Ù…Ø¬Ø©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;900&display=swap');

        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #0f172a; /* Slate 900 */
            color: #e2e8f0;
            user-select: none;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1e293b; 
        }
        ::-webkit-scrollbar-thumb {
            background: #475569; 
            border-radius: 4px;
        }

        /* Animations */
        @keyframes bounce-in {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .game-card {
            transition: all 0.2s ease;
        }
        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.5);
        }

        /* Slots Animation */
        .slot-reel {
            transition: transform 3s cubic-bezier(0.25, 1, 0.5, 1);
            filter: blur(0px);
        }
        .slot-spinning {
            filter: blur(2px);
        }

        /* Roulette Animation */
        .roulette-wheel {
            transition: transform 4s cubic-bezier(0.1, 0.7, 0.1, 1);
        }

        /* Mines Tile */
        .mine-tile {
            transition: transform 0.1s, background-color 0.2s;
        }
        .mine-tile:active {
            transform: scale(0.95);
        }
        .mine-tile.revealed {
            animation: pop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes pop {
            0% { transform: scale(0.5); }
            100% { transform: scale(1); }
        }

        .hidden-page { display: none; }
        .active-page { display: block; animation: bounce-in 0.3s ease-out; }

        /* Chips */
        .chip {
            transition: transform 0.2s;
        }
        .chip:hover {
            transform: scale(1.1);
        }
        .chip.selected {
            border: 2px solid #fbbf24;
            transform: scale(1.15);
            box-shadow: 0 0 10px #fbbf24;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Header / Navbar -->
    <header class="bg-slate-800 border-b border-slate-700 shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center gap-3 cursor-pointer" onclick="app.goHome()">
                <i class="fa-solid fa-gamepad text-2xl text-purple-500"></i>
                <h1 class="text-xl font-bold bg-gradient-to-r from-purple-400 to-pink-600 bg-clip-text text-transparent">Ù…Ù†ØµØ© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</h1>
            </div>
            
            <div class="flex items-center gap-4 bg-slate-900 px-4 py-2 rounded-full border border-slate-700">
                <span class="text-xs text-slate-400">Ø§Ù„Ø±ØµÙŠØ¯:</span>
                <div class="flex items-center gap-2">
                    <i class="fa-solid fa-coins text-yellow-500"></i>
                    <span id="global-balance" class="font-bold text-lg text-white font-mono">1000.00</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 py-6">
        
        <!-- HOME: Game Selection -->
        <div id="page-home" class="active-page">
            <div class="mb-6">
                <h2 class="text-2xl font-bold mb-2">Ø§Ø®ØªØ± Ù„Ø¹Ø¨ØªÙƒ</h2>
                <p class="text-slate-400 text-sm">Ø£Ù„Ø¹Ø§Ø¨ Ø­Ø¸ ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø­ØªÙ…Ø§Ù„Ø§Øª - Ø¬Ø±Ø¨ Ø­Ø¸Ùƒ!</p>
            </div>

            <!-- Grid Layout: Compact 3 Columns on desktop -->
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                
                <!-- Mines (Replacement for Plinko) -->
                <div onclick="app.loadGame('mines')" class="game-card bg-slate-800 hover:bg-slate-750 border border-slate-700 rounded-xl p-4 cursor-pointer relative overflow-hidden group">
                    <div class="absolute top-0 right-0 w-16 h-16 bg-emerald-500/10 rounded-bl-full -mr-4 -mt-4 transition-all group-hover:scale-150"></div>
                    <div class="flex flex-col items-center text-center">
                        <div class="w-14 h-14 rounded-full bg-slate-900 flex items-center justify-center mb-3 text-emerald-500 shadow-inner group-hover:text-emerald-400">
                            <i class="fa-solid fa-bomb text-2xl"></i>
                        </div>
                        <h3 class="font-bold text-lg group-hover:text-emerald-400 transition-colors">Ø§Ù„Ø£Ù„ØºØ§Ù… (Mines)</h3>
                        <p class="text-xs text-slate-400 mt-1">Ø§ÙƒØ´Ù Ø§Ù„Ø¬ÙˆØ§Ù‡Ø± ÙˆØªØ¬Ù†Ø¨ Ø§Ù„Ù‚Ù†Ø§Ø¨Ù„</p>
                    </div>
                </div>

                <!-- Slots -->
                <div onclick="app.loadGame('slots')" class="game-card bg-slate-800 hover:bg-slate-750 border border-slate-700 rounded-xl p-4 cursor-pointer relative overflow-hidden group">
                    <div class="absolute top-0 right-0 w-16 h-16 bg-purple-500/10 rounded-bl-full -mr-4 -mt-4 transition-all group-hover:scale-150"></div>
                    <div class="flex flex-col items-center text-center">
                        <div class="w-14 h-14 rounded-full bg-slate-900 flex items-center justify-center mb-3 text-purple-500 shadow-inner group-hover:text-purple-400">
                            <i class="fa-solid fa-gem text-2xl"></i>
                        </div>
                        <h3 class="font-bold text-lg group-hover:text-purple-400 transition-colors">Ù…Ø§ÙƒÙŠÙ†Ø© Ø§Ù„Ø­Ø¸</h3>
                        <p class="text-xs text-slate-400 mt-1">Ø·Ø§Ø¨Ù‚ Ø§Ù„Ø±Ù…ÙˆØ² Ù„Ù„ÙÙˆØ²</p>
                    </div>
                </div>

                <!-- Roulette -->
                <div onclick="app.loadGame('roulette')" class="game-card bg-slate-800 hover:bg-slate-750 border border-slate-700 rounded-xl p-4 cursor-pointer relative overflow-hidden group">
                    <div class="absolute top-0 right-0 w-16 h-16 bg-red-500/10 rounded-bl-full -mr-4 -mt-4 transition-all group-hover:scale-150"></div>
                    <div class="flex flex-col items-center text-center">
                        <div class="w-14 h-14 rounded-full bg-slate-900 flex items-center justify-center mb-3 text-red-500 shadow-inner group-hover:text-red-400">
                            <i class="fa-solid fa-circle-notch text-2xl"></i>
                        </div>
                        <h3 class="font-bold text-lg group-hover:text-red-400 transition-colors">Ø§Ù„Ø±ÙˆÙ„ÙŠØª</h3>
                        <p class="text-xs text-slate-400 mt-1">Ø®Ù…Ù† Ø£ÙŠÙ† Ø³ØªÙ‚Ù Ø§Ù„Ø¹Ø¬Ù„Ø©</p>
                    </div>
                </div>

                 <!-- Dice (Simple Extra) -->
                 <div onclick="app.loadGame('dice')" class="game-card bg-slate-800 hover:bg-slate-750 border border-slate-700 rounded-xl p-4 cursor-pointer relative overflow-hidden group">
                    <div class="absolute top-0 right-0 w-16 h-16 bg-blue-500/10 rounded-bl-full -mr-4 -mt-4 transition-all group-hover:scale-150"></div>
                    <div class="flex flex-col items-center text-center">
                        <div class="w-14 h-14 rounded-full bg-slate-900 flex items-center justify-center mb-3 text-blue-500 shadow-inner group-hover:text-blue-400">
                            <i class="fa-solid fa-dice text-2xl"></i>
                        </div>
                        <h3 class="font-bold text-lg group-hover:text-blue-400 transition-colors">Ø§Ù„Ù†Ø±Ø¯</h3>
                        <p class="text-xs text-slate-400 mt-1">Ø£Ø¹Ù„Ù‰ Ø£Ùˆ Ø£Ù‚Ù„ Ù…Ù† 50</p>
                    </div>
                </div>

            </div>
        </div>

        <!-- GAME: Mines -->
        <div id="page-mines" class="hidden-page max-w-4xl mx-auto">
            <div class="flex flex-col md:flex-row gap-6">
                <!-- Sidebar Controls -->
                <div class="w-full md:w-1/3 bg-slate-800 p-5 rounded-xl border border-slate-700 h-fit">
                    <div class="mb-4">
                        <label class="text-xs text-slate-400 block mb-1">Ù…Ø¨Ù„Øº Ø§Ù„Ø±Ù‡Ø§Ù†</label>
                        <div class="relative">
                            <input type="number" id="mines-bet" value="10" min="1" class="w-full bg-slate-900 border border-slate-600 rounded p-2 pl-8 focus:border-emerald-500 outline-none text-white">
                            <i class="fa-solid fa-coins absolute left-3 top-3 text-yellow-500 text-xs"></i>
                        </div>
                    </div>
                    <div class="mb-6">
                        <label class="text-xs text-slate-400 block mb-1">Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ù„ØºØ§Ù…</label>
                        <select id="mines-count" class="w-full bg-slate-900 border border-slate-600 rounded p-2 focus:border-emerald-500 outline-none text-white">
                            <option value="1">1 Ù„ØºÙ…</option>
                            <option value="3" selected>3 Ø£Ù„ØºØ§Ù…</option>
                            <option value="5">5 Ø£Ù„ØºØ§Ù…</option>
                            <option value="10">10 Ø£Ù„ØºØ§Ù…</option>
                            <option value="20">20 Ù„ØºÙ…</option>
                        </select>
                    </div>
                    
                    <button id="mines-btn-start" onclick="minesGame.start()" class="w-full bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-3 rounded shadow-lg transition-all mb-3">
                        Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨
                    </button>
                    <button id="mines-btn-cashout" onclick="minesGame.cashout()" class="w-full bg-slate-600 text-slate-400 font-bold py-3 rounded shadow-lg cursor-not-allowed opacity-50" disabled>
                        Ø§Ù†Ø³Ø­Ø§Ø¨ (<span id="mines-cashout-val">0.00</span>)
                    </button>
                    
                    <div class="mt-4 p-3 bg-slate-900/50 rounded text-center">
                        <div class="text-xs text-slate-400">Ø§Ù„Ù…Ø¶Ø§Ø¹Ù Ø§Ù„Ø­Ø§Ù„ÙŠ</div>
                        <div class="text-2xl font-bold text-emerald-400 font-mono">x<span id="mines-multiplier">1.00</span></div>
                    </div>
                </div>

                <!-- Game Board -->
                <div class="w-full md:w-2/3 bg-slate-800 p-6 rounded-xl border border-slate-700 flex flex-col items-center justify-center relative">
                    <div id="mines-grid" class="grid grid-cols-5 gap-3 w-full max-w-[400px]">
                        <!-- Tiles generated by JS -->
                    </div>
                    <!-- Overlay Message -->
                    <div id="mines-overlay" class="hidden absolute inset-0 bg-slate-900/80 backdrop-blur-sm z-10 flex flex-col items-center justify-center rounded-xl">
                        <h2 id="mines-result-text" class="text-3xl font-bold mb-2">ÙÙˆØ²!</h2>
                        <div id="mines-result-amount" class="text-xl text-yellow-400 font-mono mb-4">+100</div>
                        <button onclick="document.getElementById('mines-overlay').classList.add('hidden')" class="px-6 py-2 bg-slate-700 hover:bg-slate-600 rounded text-sm">Ø­Ø³Ù†Ø§Ù‹</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- GAME: Slots -->
        <div id="page-slots" class="hidden-page max-w-3xl mx-auto">
            <div class="bg-slate-800 p-6 rounded-xl border border-slate-700 shadow-2xl relative">
                <!-- Decorative top -->
                <div class="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-slate-700 px-6 py-1 rounded-b-xl border border-t-0 border-slate-600">
                    <span class="font-bold text-yellow-500 tracking-widest text-sm">SLOTS</span>
                </div>

                <!-- Reels Container -->
                <div class="flex justify-center gap-2 md:gap-4 bg-slate-900 p-4 md:p-8 rounded-lg border-4 border-slate-700 mb-6 shadow-inner relative overflow-hidden h-48 md:h-64 items-center">
                    <!-- Winning Line Indicator -->
                    <div class="absolute w-full h-1 bg-red-500/30 top-1/2 -translate-y-1/2 z-0 pointer-events-none"></div>

                    <!-- Reel 1 -->
                    <div class="w-1/3 h-full bg-slate-800 rounded border border-slate-600 overflow-hidden relative">
                        <div id="reel-1" class="flex flex-col items-center slot-reel">
                            <!-- Symbols inserted by JS -->
                        </div>
                    </div>
                    <!-- Reel 2 -->
                    <div class="w-1/3 h-full bg-slate-800 rounded border border-slate-600 overflow-hidden relative">
                        <div id="reel-2" class="flex flex-col items-center slot-reel">
                        </div>
                    </div>
                    <!-- Reel 3 -->
                    <div class="w-1/3 h-full bg-slate-800 rounded border border-slate-600 overflow-hidden relative">
                        <div id="reel-3" class="flex flex-col items-center slot-reel">
                        </div>
                    </div>
                </div>

                <!-- Controls -->
                <div class="flex flex-col md:flex-row items-center justify-between gap-4">
                    <div class="flex items-center gap-2 bg-slate-900 p-2 rounded border border-slate-600">
                        <button onclick="slotsGame.adjustBet(-10)" class="w-8 h-8 bg-slate-700 hover:bg-slate-600 rounded text-slate-300">-</button>
                        <div class="flex flex-col items-center w-24">
                            <span class="text-[10px] text-slate-500">Ø§Ù„Ø±Ù‡Ø§Ù†</span>
                            <span id="slots-bet" class="font-bold font-mono">10</span>
                        </div>
                        <button onclick="slotsGame.adjustBet(10)" class="w-8 h-8 bg-slate-700 hover:bg-slate-600 rounded text-slate-300">+</button>
                    </div>

                    <div class="flex flex-col items-center">
                        <span class="text-[10px] text-slate-500 uppercase tracking-wider mb-1">Last Win</span>
                        <span id="slots-last-win" class="text-xl font-bold text-yellow-500 font-mono">0.00</span>
                    </div>

                    <button id="slots-btn-spin" onclick="slotsGame.spin()" class="px-8 py-3 bg-gradient-to-b from-purple-500 to-purple-700 hover:from-purple-400 hover:to-purple-600 text-white font-bold rounded shadow-lg border-b-4 border-purple-900 active:translate-y-1 active:border-b-0 transition-all w-full md:w-auto">
                        Ø¯ÙˆØ±Ø§Ù†!
                    </button>
                </div>
            </div>
        </div>

        <!-- GAME: Roulette -->
        <div id="page-roulette" class="hidden-page max-w-5xl mx-auto">
            <div class="flex flex-col lg:flex-row gap-8 items-center justify-center">
                <!-- The Wheel -->
                <div class="relative w-72 h-72 md:w-80 md:h-80 flex-shrink-0">
                    <div class="absolute inset-0 rounded-full border-8 border-slate-700 shadow-2xl bg-slate-800 overflow-hidden">
                        <div id="roulette-wheel" class="w-full h-full rounded-full roulette-wheel" style="background: conic-gradient(
                            #ef4444 0deg 9.7deg, #1e293b 9.7deg 19.4deg, 
                            #ef4444 19.4deg 29.1deg, #1e293b 29.1deg 38.8deg,
                            #ef4444 38.8deg 48.5deg, #1e293b 48.5deg 58.2deg,
                            #ef4444 58.2deg 67.9deg, #1e293b 67.9deg 77.6deg,
                            #ef4444 77.6deg 87.3deg, #1e293b 87.3deg 97deg,
                            #22c55e 97deg 106.7deg, /* Zero Green */
                            #1e293b 106.7deg 116.4deg, #ef4444 116.4deg 126.1deg,
                            #1e293b 126.1deg 135.8deg, #ef4444 135.8deg 145.5deg,
                            #1e293b 145.5deg 155.2deg, #ef4444 155.2deg 164.9deg,
                            #1e293b 164.9deg 174.6deg, #ef4444 174.6deg 184.3deg,
                            #1e293b 184.3deg 194deg, #ef4444 194deg 203.7deg,
                            #1e293b 203.7deg 213.4deg, #ef4444 213.4deg 223.1deg,
                            #1e293b 223.1deg 232.8deg, #ef4444 232.8deg 242.5deg,
                            #1e293b 242.5deg 252.2deg, #ef4444 252.2deg 261.9deg,
                            #1e293b 261.9deg 271.6deg, #ef4444 271.6deg 281.3deg,
                            #1e293b 281.3deg 291deg, #ef4444 291deg 300.7deg,
                            #1e293b 300.7deg 310.4deg, #ef4444 310.4deg 320.1deg,
                            #1e293b 320.1deg 330deg, #ef4444 330deg 340deg,
                            #1e293b 340deg 350deg, #ef4444 350deg 360deg
                        );">
                        </div>
                        <!-- Center Cap -->
                        <div class="absolute inset-0 m-auto w-12 h-12 bg-slate-200 rounded-full border-4 border-slate-400 z-10 shadow flex items-center justify-center">
                           <div class="w-8 h-8 rounded-full bg-slate-800"></div>
                        </div>
                    </div>
                    <!-- Marker -->
                    <div class="absolute top-0 left-1/2 -translate-x-1/2 -mt-2 text-yellow-400 text-3xl z-20 drop-shadow-md">
                        <i class="fa-solid fa-caret-down"></i>
                    </div>
                </div>

                <!-- Betting Board -->
                <div class="bg-slate-800 p-4 rounded-xl border border-slate-700 flex-grow w-full max-w-lg">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-bold">Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø±Ø§Ù‡Ù†Ø§Øª</h3>
                        <div class="flex items-center gap-2">
                             <input type="number" id="roulette-bet" value="50" class="w-20 bg-slate-900 border border-slate-600 rounded px-2 py-1 text-right">
                             <span class="text-xs text-yellow-500"><i class="fa-solid fa-coins"></i></span>
                        </div>
                    </div>

                    <!-- Simple Betting Options -->
                    <div class="grid grid-cols-3 gap-2 mb-2">
                        <button onclick="rouletteGame.setBetType('red')" id="btn-red" class="chip bg-red-600 hover:bg-red-500 py-3 rounded font-bold text-white border-b-4 border-red-800 active:border-b-0 active:translate-y-1">Ø£Ø­Ù…Ø± (x2)</button>
                        <button onclick="rouletteGame.setBetType('green')" id="btn-green" class="chip bg-green-600 hover:bg-green-500 py-3 rounded font-bold text-white border-b-4 border-green-800 active:border-b-0 active:translate-y-1">ØµÙØ± (x14)</button>
                        <button onclick="rouletteGame.setBetType('black')" id="btn-black" class="chip bg-slate-900 hover:bg-slate-700 py-3 rounded font-bold text-white border-b-4 border-black active:border-b-0 active:translate-y-1">Ø£Ø³ÙˆØ¯ (x2)</button>
                    </div>
                    <div class="grid grid-cols-2 gap-2">
                        <button onclick="rouletteGame.setBetType('even')" id="btn-even" class="chip bg-blue-600 hover:bg-blue-500 py-3 rounded font-bold text-white border-b-4 border-blue-800 active:border-b-0 active:translate-y-1">Ø²ÙˆØ¬ÙŠ (x2)</button>
                        <button onclick="rouletteGame.setBetType('odd')" id="btn-odd" class="chip bg-blue-600 hover:bg-blue-500 py-3 rounded font-bold text-white border-b-4 border-blue-800 active:border-b-0 active:translate-y-1">ÙØ±Ø¯ÙŠ (x2)</button>
                    </div>

                    <div class="mt-4 flex justify-between items-center bg-slate-900 p-2 rounded">
                        <span class="text-xs text-slate-400">Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ù…Ø­Ø¯Ø¯: <span id="roulette-selection" class="text-white font-bold">Ù„Ø§Ø´ÙŠØ¡</span></span>
                        <button onclick="rouletteGame.spin()" id="roulette-spin-btn" class="px-6 py-1 bg-yellow-600 hover:bg-yellow-500 text-white rounded font-bold text-sm disabled:opacity-50 disabled:cursor-not-allowed">Ù„Ø¹Ø¨</button>
                    </div>
                </div>
            </div>
            
            <div id="roulette-history" class="mt-6 flex justify-center gap-2 overflow-x-auto p-2">
                <!-- History bubbles -->
            </div>
        </div>
        
        <!-- GAME: Dice (Simple) -->
        <div id="page-dice" class="hidden-page max-w-2xl mx-auto">
             <div class="bg-slate-800 p-8 rounded-xl border border-slate-700 text-center">
                 <h2 class="text-2xl font-bold mb-6">Ø±Ù…ÙŠØ© Ø§Ù„Ù†Ø±Ø¯</h2>
                 
                 <div class="flex justify-center gap-8 mb-8">
                     <div id="dice-result" class="text-6xl font-bold text-blue-500 font-mono transition-all">50</div>
                 </div>
                 
                 <!-- Range Slider UI -->
                 <div class="mb-8 relative pt-6">
                     <div class="h-2 bg-slate-700 rounded-full w-full relative overflow-hidden">
                         <div id="dice-bar-low" class="absolute left-0 top-0 h-full bg-red-500 transition-all" style="width: 48%"></div>
                         <div id="dice-bar-high" class="absolute right-0 top-0 h-full bg-green-500 transition-all" style="width: 48%"></div>
                     </div>
                     <div class="flex justify-between text-xs mt-2 text-slate-400 font-mono">
                         <span>0</span>
                         <span>25</span>
                         <span>50</span>
                         <span>75</span>
                         <span>100</span>
                     </div>
                 </div>

                 <div class="grid grid-cols-2 gap-4 mb-6">
                     <button onclick="diceGame.play('lower')" class="p-4 bg-slate-700 hover:bg-red-900/50 border border-slate-600 rounded-lg group">
                         <div class="text-sm text-slate-400 mb-1">Ø£Ù‚Ù„ Ù…Ù† 48</div>
                         <div class="text-xl font-bold text-red-400 group-hover:text-red-300">x2.00</div>
                     </button>
                     <button onclick="diceGame.play('higher')" class="p-4 bg-slate-700 hover:bg-green-900/50 border border-slate-600 rounded-lg group">
                         <div class="text-sm text-slate-400 mb-1">Ø£Ø¹Ù„Ù‰ Ù…Ù† 52</div>
                         <div class="text-xl font-bold text-green-400 group-hover:text-green-300">x2.00</div>
                     </button>
                 </div>
                 
                 <div class="flex items-center justify-center gap-2">
                     <span class="text-sm">Ø§Ù„Ø±Ù‡Ø§Ù†:</span>
                     <input type="number" id="dice-bet" value="10" class="w-24 bg-slate-900 border border-slate-600 rounded p-2 text-center">
                 </div>
             </div>
        </div>

    </main>

    <!-- Notification Toast -->
    <div id="toast" class="fixed bottom-5 left-1/2 -translate-x-1/2 bg-slate-800 border border-slate-600 text-white px-6 py-3 rounded-full shadow-2xl transform translate-y-20 transition-transform duration-300 flex items-center gap-3 z-50">
        <i id="toast-icon" class="fa-solid fa-info-circle"></i>
        <span id="toast-message">Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…</span>
    </div>

<script>
    // --- Global State ---
    const app = {
        balance: 1000.00,
        currentPage: 'home',

        init: function() {
            this.updateBalanceDisplay();
        },

        updateBalanceDisplay: function() {
            document.getElementById('global-balance').textContent = this.balance.toFixed(2);
        },

        changeBalance: function(amount) {
            this.balance += amount;
            this.updateBalanceDisplay();
            // Animation for balance change
            const balEl = document.getElementById('global-balance');
            balEl.style.color = amount >= 0 ? '#4ade80' : '#f87171';
            setTimeout(() => balEl.style.color = 'white', 300);
        },

        loadGame: function(gameName) {
            // Hide all pages
            document.querySelectorAll('[id^="page-"]').forEach(el => {
                el.classList.remove('active-page');
                el.classList.add('hidden-page');
            });
            // Show selected
            document.getElementById(`page-${gameName}`).classList.remove('hidden-page');
            document.getElementById(`page-${gameName}`).classList.add('active-page');
            this.currentPage = gameName;

            // Init specific game if needed
            if (gameName === 'mines') minesGame.init();
        },

        goHome: function() {
            this.loadGame('home');
        },

        toast: function(msg, type = 'info') {
            const toast = document.getElementById('toast');
            const msgEl = document.getElementById('toast-message');
            const iconEl = document.getElementById('toast-icon');

            msgEl.textContent = msg;
            toast.className = `fixed bottom-5 left-1/2 -translate-x-1/2 px-6 py-3 rounded-full shadow-2xl transform transition-transform duration-300 flex items-center gap-3 z-50 border ${
                type === 'error' ? 'bg-red-900/90 border-red-700 text-red-100' :
                type === 'success' ? 'bg-emerald-900/90 border-emerald-700 text-emerald-100' :
                'bg-slate-800 border-slate-600 text-white'
            }`;

            iconEl.className = type === 'error' ? 'fa-solid fa-circle-xmark' : 
                             type === 'success' ? 'fa-solid fa-circle-check' : 'fa-solid fa-info-circle';

            toast.style.transform = 'translate(-50%, 0)';
            setTimeout(() => {
                toast.style.transform = 'translate(-50%, 150%)';
            }, 3000);
        }
    };

    // --- Mines Game Logic ---
    const minesGame = {
        gridSize: 25, // 5x5
        mines: [],
        revealed: [],
        isPlaying: false,
        bet: 0,
        mineCount: 3,
        currentMultiplier: 1.0,

        init: function() {
            this.renderGrid();
        },

        renderGrid: function() {
            const grid = document.getElementById('mines-grid');
            grid.innerHTML = '';
            for (let i = 0; i < this.gridSize; i++) {
                const tile = document.createElement('button');
                tile.className = 'mine-tile w-full aspect-square bg-slate-700 rounded-lg hover:bg-slate-600 shadow-inner relative overflow-hidden';
                tile.dataset.index = i;
                tile.onclick = () => this.clickTile(i);
                grid.appendChild(tile);
            }
        },

        getMultiplier: function(moves, mines) {
            // Simple multiplier logic based on probability
            // Formula is roughly: 1 / ( (Total - Mines - Moves) / (Total - Moves) )
            // But we'll use a pre-calculated simplistic progression for stability
            let base = 0.99; // House edge
            let total = 25;
            let safe = total - mines;
            let multiplier = 1;
            
            for(let i=0; i<moves; i++) {
                multiplier *= (total - i) / (safe - i);
            }
            return (multiplier * base).toFixed(2);
        },

        start: function() {
            const betInput = document.getElementById('mines-bet');
            this.bet = parseFloat(betInput.value);
            this.mineCount = parseInt(document.getElementById('mines-count').value);

            if (this.bet > app.balance) {
                app.toast('Ø§Ù„Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙŠ', 'error');
                return;
            }
            if (this.bet <= 0) {
                app.toast('Ø§Ù„Ø±Ù‡Ø§Ù† ØºÙŠØ± ØµØ§Ù„Ø­', 'error');
                return;
            }

            // Deduct bet
            app.changeBalance(-this.bet);

            // Reset State
            this.isPlaying = true;
            this.revealed = [];
            this.currentMultiplier = 1.0;
            document.getElementById('mines-multiplier').textContent = '1.00';
            document.getElementById('mines-cashout-val').textContent = this.bet.toFixed(2);

            // UI Updates
            document.getElementById('mines-btn-start').disabled = true;
            document.getElementById('mines-btn-start').classList.add('opacity-50', 'cursor-not-allowed');
            document.getElementById('mines-btn-cashout').disabled = false;
            document.getElementById('mines-btn-cashout').classList.remove('opacity-50', 'cursor-not-allowed');
            document.getElementById('mines-btn-cashout').classList.add('bg-green-600', 'text-white', 'hover:bg-green-500');
            document.getElementById('mines-btn-cashout').classList.remove('bg-slate-600', 'text-slate-400');
            
            // Generate Mines
            this.mines = [];
            while(this.mines.length < this.mineCount) {
                let r = Math.floor(Math.random() * 25);
                if(this.mines.indexOf(r) === -1) this.mines.push(r);
            }

            // Reset Grid Visuals
            const tiles = document.querySelectorAll('.mine-tile');
            tiles.forEach(t => {
                t.className = 'mine-tile w-full aspect-square bg-slate-700 rounded-lg hover:bg-slate-600 shadow-inner relative overflow-hidden cursor-pointer';
                t.innerHTML = '';
                t.disabled = false;
            });
        },

        clickTile: function(index) {
            if (!this.isPlaying || this.revealed.includes(index)) return;

            const tile = document.querySelector(`.mine-tile[data-index="${index}"]`);
            this.revealed.push(index);

            if (this.mines.includes(index)) {
                // LOST
                this.gameOver(false, index);
            } else {
                // SAFE
                tile.className = 'mine-tile revealed w-full aspect-square bg-slate-800 rounded-lg border-2 border-emerald-500/50 flex items-center justify-center';
                tile.innerHTML = '<i class="fa-regular fa-gem text-emerald-400 text-2xl drop-shadow-lg filter shadow-emerald-500/50"></i>';
                
                // Update Multiplier
                let moves = this.revealed.length;
                this.currentMultiplier = this.getMultiplier(moves, this.mineCount);
                document.getElementById('mines-multiplier').textContent = this.currentMultiplier;
                
                let currentWin = (this.bet * this.currentMultiplier).toFixed(2);
                document.getElementById('mines-cashout-val').textContent = currentWin;

                // Check for max win (all safe tiles revealed)
                if (this.revealed.length === (25 - this.mineCount)) {
                    this.cashout();
                }
            }
        },

        cashout: function() {
            if(!this.isPlaying) return;
            
            let winAmount = parseFloat(this.bet * this.currentMultiplier);
            app.changeBalance(winAmount);
            this.gameOver(true, -1);
            
            // Show Overlay
            const overlay = document.getElementById('mines-overlay');
            document.getElementById('mines-result-text').textContent = "ÙÙˆØ²!";
            document.getElementById('mines-result-text').className = "text-3xl font-bold mb-2 text-emerald-400";
            document.getElementById('mines-result-amount').textContent = "+" + winAmount.toFixed(2);
            overlay.classList.remove('hidden');
        },

        gameOver: function(win, badIndex) {
            this.isPlaying = false;
            
            // Reveal all mines
            this.mines.forEach(idx => {
                const t = document.querySelector(`.mine-tile[data-index="${idx}"]`);
                if(idx === badIndex) {
                    t.className = 'mine-tile revealed w-full aspect-square bg-red-500 rounded-lg flex items-center justify-center shake';
                    t.innerHTML = '<i class="fa-solid fa-bomb text-white text-2xl"></i>';
                } else {
                    t.className = 'mine-tile revealed w-full aspect-square bg-slate-800/50 rounded-lg flex items-center justify-center opacity-50';
                    t.innerHTML = '<i class="fa-solid fa-bomb text-red-500 text-xl"></i>';
                }
            });

            // Reveal remaining gems (dimmed)
            for(let i=0; i<25; i++) {
                if(!this.mines.includes(i) && !this.revealed.includes(i)) {
                    const t = document.querySelector(`.mine-tile[data-index="${i}"]`);
                    t.innerHTML = '<i class="fa-regular fa-gem text-emerald-500/20 text-xl"></i>';
                    t.classList.add('opacity-50');
                }
            }

            // Reset UI Buttons
            document.getElementById('mines-btn-start').disabled = false;
            document.getElementById('mines-btn-start').classList.remove('opacity-50', 'cursor-not-allowed');
            
            document.getElementById('mines-btn-cashout').disabled = true;
            document.getElementById('mines-btn-cashout').classList.add('opacity-50', 'cursor-not-allowed', 'bg-slate-600', 'text-slate-400');
            document.getElementById('mines-btn-cashout').classList.remove('bg-green-600', 'text-white', 'hover:bg-green-500');
            document.getElementById('mines-btn-cashout').innerHTML = 'Ø§Ù†Ø³Ø­Ø§Ø¨ (<span id="mines-cashout-val">0.00</span>)';
        }
    };

    // --- Slots Game Logic ---
    const slotsGame = {
        symbols: ['ğŸ’', 'ğŸ‹', 'ğŸ‡', 'ğŸ‰', 'ğŸ””', 'ğŸ’', '7ï¸âƒ£'],
        weights: [10,  10,   8,    8,    5,    3,    1], // Probability weights
        bet: 10,
        
        adjustBet: function(delta) {
            if(this.bet + delta >= 10 && this.bet + delta <= 500) {
                this.bet += delta;
                document.getElementById('slots-bet').textContent = this.bet;
            }
        },

        getRandomSymbol: function() {
            // Weighted random
            let totalWeight = this.weights.reduce((a,b) => a+b, 0);
            let random = Math.random() * totalWeight;
            let weightSum = 0;
            
            for(let i=0; i<this.symbols.length; i++) {
                weightSum += this.weights[i];
                weightSum = +weightSum.toFixed(2);
                if(random <= weightSum) return this.symbols[i];
            }
            return this.symbols[0];
        },

        spin: function() {
            if(app.balance < this.bet) {
                app.toast('Ø§Ù„Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙŠ', 'error');
                return;
            }
            app.changeBalance(-this.bet);

            const btn = document.getElementById('slots-btn-spin');
            btn.disabled = true;
            btn.classList.add('opacity-50');

            const reels = [
                document.getElementById('reel-1'),
                document.getElementById('reel-2'),
                document.getElementById('reel-3')
            ];

            // Setup results
            const results = [this.getRandomSymbol(), this.getRandomSymbol(), this.getRandomSymbol()];

            // Animate
            reels.forEach((reel, i) => {
                // Add blur class
                reel.classList.add('slot-spinning');
                
                // Simulate fast scroll by manipulating transform or innerHTML rapidly
                let interval = setInterval(() => {
                    reel.innerHTML = `<div class="text-4xl py-4 filter blur-sm">${this.getRandomSymbol()}</div>
                                      <div class="text-4xl py-4 filter blur-sm">${this.getRandomSymbol()}</div>
                                      <div class="text-4xl py-4 filter blur-sm">${this.getRandomSymbol()}</div>`;
                }, 50);

                // Stop reel
                setTimeout(() => {
                    clearInterval(interval);
                    reel.classList.remove('slot-spinning');
                    reel.innerHTML = `
                        <div class="text-4xl py-4 opacity-30 scale-75">${this.getRandomSymbol()}</div>
                        <div class="text-5xl py-4 font-bold drop-shadow-md scale-110">${results[i]}</div>
                        <div class="text-4xl py-4 opacity-30 scale-75">${this.getRandomSymbol()}</div>
                    `;
                    // Pop animation
                    reel.children[1].animate([
                        { transform: 'scale(0.5)' },
                        { transform: 'scale(1.2)' },
                        { transform: 'scale(1)' }
                    ], 200);

                    if (i === 2) this.checkWin(results);
                }, 1000 + (i * 500));
            });
        },

        checkWin: function(results) {
            const btn = document.getElementById('slots-btn-spin');
            btn.disabled = false;
            btn.classList.remove('opacity-50');

            let winMult = 0;
            
            // Logic: 3 match, or 2 match + Wild (not implemented simple version)
            // Simple: 3 match
            if (results[0] === results[1] && results[1] === results[2]) {
                const s = results[0];
                if(s === '7ï¸âƒ£') winMult = 50;
                else if(s === 'ğŸ’') winMult = 20;
                else if(s === 'ğŸ””') winMult = 10;
                else winMult = 5;
            } 
            // Any 2 sevens
            else if (results.filter(x => x === '7ï¸âƒ£').length === 2) {
                winMult = 5;
            }

            if (winMult > 0) {
                const win = this.bet * winMult;
                app.changeBalance(win);
                app.toast(`Ø±Ø¨Ø­Øª ${win}!`, 'success');
                document.getElementById('slots-last-win').textContent = win.toFixed(2);
            }
        }
    };

    // --- Roulette Game Logic ---
    const rouletteGame = {
        selectedBet: null, // 'red', 'black', 'green', 'even', 'odd'
        
        // Wheel mapping (Standard European)
        // Order clockwise from 0: 
        numbers: [0, 32, 15, 19, 4, 21, 2, 25, 17, 34, 6, 27, 13, 36, 11, 30, 8, 23, 10, 5, 24, 16, 33, 1, 20, 14, 31, 9, 22, 18, 29, 7, 28, 12, 35, 3],
        colors: {
            0: 'green',
            1: 'red', 2: 'black', 3: 'red', 4: 'black', 5: 'red', 6: 'black', 7: 'red', 8: 'black', 9: 'red', 10: 'black',
            11: 'black', 12: 'red', 13: 'black', 14: 'red', 15: 'black', 16: 'red', 17: 'black', 18: 'red', 19: 'red', 20: 'black',
            21: 'red', 22: 'black', 23: 'red', 24: 'black', 25: 'red', 26: 'black', 27: 'red', 28: 'black', 29: 'black', 30: 'red',
            31: 'black', 32: 'red', 33: 'black', 34: 'red', 35: 'black', 36: 'red'
        },

        currentRotation: 0,

        setBetType: function(type) {
            // Reset chip styles
            document.querySelectorAll('.chip').forEach(c => c.classList.remove('selected'));
            document.getElementById(`btn-${type}`).classList.add('selected');
            
            this.selectedBet = type;
            let label = type === 'red' ? 'Ø£Ø­Ù…Ø±' : 
                        type === 'black' ? 'Ø£Ø³ÙˆØ¯' : 
                        type === 'green' ? 'ØµÙØ±' :
                        type === 'even' ? 'Ø²ÙˆØ¬ÙŠ' : 'ÙØ±Ø¯ÙŠ';
            document.getElementById('roulette-selection').textContent = label;
        },

        spin: function() {
            const betAmount = parseFloat(document.getElementById('roulette-bet').value);
            
            if(!this.selectedBet) {
                app.toast('Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø±Ù‡Ø§Ù† Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return;
            }
            if(app.balance < betAmount) {
                app.toast('Ø§Ù„Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙŠ', 'error');
                return;
            }

            app.changeBalance(-betAmount);
            document.getElementById('roulette-spin-btn').disabled = true;

            // Pick random number
            const resultIndex = Math.floor(Math.random() * 37); // 0-36 indices in our array
            const winningNumber = this.numbers[resultIndex];
            
            // Calculate degrees
            // Each slice is 360/37 = ~9.72 deg
            const sliceDeg = 360/37;
            // The wheel rotates, the pointer is fixed at top.
            // If 0 is at top, and we want index 1 (32) to be at top, we rotate LEFT by 1 unit.
            // So rotation = -(index * sliceDeg)
            // Add extra spins (5 full rotations = 1800)
            const extraSpins = 360 * 5;
            const targetRotation = extraSpins + (resultIndex * sliceDeg); 
            
            // To prevent resetting rotation, we add to current
            this.currentRotation += targetRotation;
            
            // Adjust so it lands somewhat centered on the slice but adds randomness to position within slice
            // Actually, CSS conic gradient puts 0 at top. 
            // To get Index X under the arrow (Top), we need to rotate the WHEEL counter-clockwise by X steps?
            // Wait, simpler: We rotate the wheel so the number is at the top (0deg).
            // Our array starts at 0 deg. 
            // So simply Rotate = - (index * 9.72).
            
            // Apply Transform
            const wheel = document.getElementById('roulette-wheel');
            // We want to land on 'resultIndex'.
            // Because our CSS gradient draws clockwise starting 0 at top...
            // To bring the Nth slice to the top, we rotate Counter Clockwise by N*slice.
            // But 'transform: rotate' is clockwise. So we rotate Clockwise by (360 - N*slice).
            const finalAngle = (360 - (resultIndex * sliceDeg));
            const totalRot = 1800 + finalAngle + (Math.random() * 8 - 4); // add randomness +-4deg
            
            wheel.style.transition = 'transform 4s cubic-bezier(0.1, 0.7, 0.1, 1)';
            wheel.style.transform = `rotate(${totalRot}deg)`;

            setTimeout(() => {
                // Reset for next time (keep visuals but allow reset if needed logic)
                wheel.style.transition = 'none';
                wheel.style.transform = `rotate(${finalAngle}deg)`;
                this.checkWin(winningNumber, betAmount);
                document.getElementById('roulette-spin-btn').disabled = false;
            }, 4000);
        },

        checkWin: function(number, bet) {
            const color = this.colors[number];
            const isEven = number !== 0 && number % 2 === 0;
            const isOdd = number !== 0 && number % 2 !== 0;
            
            let won = false;
            let multiplier = 0;

            if (this.selectedBet === 'red' && color === 'red') { won = true; multiplier = 2; }
            else if (this.selectedBet === 'black' && color === 'black') { won = true; multiplier = 2; }
            else if (this.selectedBet === 'green' && number === 0) { won = true; multiplier = 14; }
            else if (this.selectedBet === 'even' && isEven) { won = true; multiplier = 2; }
            else if (this.selectedBet === 'odd' && isOdd) { won = true; multiplier = 2; }

            if (won) {
                const winAmount = bet * multiplier;
                app.changeBalance(winAmount);
                app.toast(`Ø±Ù‚Ù… ${number} (${color}) - Ø±Ø¨Ø­Øª ${winAmount}!`, 'success');
            } else {
                app.toast(`Ø±Ù‚Ù… ${number} (${color}) - Ø­Ø¸ Ø£ÙˆÙØ±`, 'info');
            }
            
            // Add to history
            const hist = document.getElementById('roulette-history');
            const ball = document.createElement('div');
            ball.className = `w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold border-2 border-slate-600 flex-shrink-0 ${color === 'red' ? 'bg-red-600' : color === 'black' ? 'bg-slate-900' : 'bg-green-600'}`;
            ball.textContent = number;
            hist.prepend(ball);
            if(hist.children.length > 10) hist.lastChild.remove();
        }
    };
    
    // --- Dice Game Logic ---
    const diceGame = {
        play: function(prediction) {
            const bet = parseFloat(document.getElementById('dice-bet').value);
             if(app.balance < bet) {
                app.toast('Ø§Ù„Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙŠ', 'error');
                return;
            }
            app.changeBalance(-bet);
            
            // Animate
            const el = document.getElementById('dice-result');
            let count = 0;
            const interval = setInterval(() => {
                el.textContent = Math.floor(Math.random() * 100);
                count++;
                if(count > 10) {
                    clearInterval(interval);
                    this.finalize(prediction, bet);
                }
            }, 50);
        },
        
        finalize: function(prediction, bet) {
            const result = Math.floor(Math.random() * 100);
            const el = document.getElementById('dice-result');
            el.textContent = result;
            
            // Lower wins if < 48, Higher wins if > 52 (House edge)
            let won = false;
            if (prediction === 'lower' && result < 48) won = true;
            if (prediction === 'higher' && result > 52) won = true;
            
            if(won) {
                el.classList.add('text-green-500');
                el.classList.remove('text-blue-500', 'text-red-500');
                app.changeBalance(bet * 2);
                app.toast('ÙÙˆØ²!', 'success');
            } else {
                el.classList.add('text-red-500');
                el.classList.remove('text-blue-500', 'text-green-500');
            }
            
            setTimeout(() => el.classList.remove('text-green-500', 'text-red-500', 'text-blue-500'), 2000);
            setTimeout(() => el.classList.add('text-blue-500'), 2000);
        }
    };

    // Init App
    // Fill initial Slots Visuals
    document.getElementById('reel-1').innerHTML = `<div class="text-4xl py-4 opacity-30">ğŸ’</div><div class="text-5xl py-4 font-bold drop-shadow-md">7ï¸âƒ£</div><div class="text-4xl py-4 opacity-30">ğŸ‹</div>`;
    document.getElementById('reel-2').innerHTML = `<div class="text-4xl py-4 opacity-30">ğŸ””</div><div class="text-5xl py-4 font-bold drop-shadow-md">7ï¸âƒ£</div><div class="text-4xl py-4 opacity-30">ğŸ‡</div>`;
    document.getElementById('reel-3').innerHTML = `<div class="text-4xl py-4 opacity-30">ğŸ’</div><div class="text-5xl py-4 font-bold drop-shadow-md">7ï¸âƒ£</div><div class="text-4xl py-4 opacity-30">ğŸ‰</div>`;

    app.init();

</script>
</body>
</html>
