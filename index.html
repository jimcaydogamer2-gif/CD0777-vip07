<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
Â  Â  <title>CD0777 Royal Club - Pro V7</title>
Â  Â Â 
Â  Â  <script src="https://cdn.tailwindcss.com"></script>
Â  Â  <script>
Â  Â  Â  Â  tailwind.config = {
Â  Â  Â  Â  Â  Â  darkMode: 'class',
Â  Â  Â  Â  Â  Â  theme: {
Â  Â  Â  Â  Â  Â  Â  Â  extend: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  colors: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gold: { 100: '#FFF9C4', 300: '#FDD835', 400: '#FFD700', 500: '#FFC107', 600: '#FFB300', 700: '#FFA000', 800: '#C0A000', 900: '#3d2e07' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dark: { 950: '#020617', 900: '#0f172a', 800: '#1e293b' }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fontFamily: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cairo: ['Cairo', 'sans-serif'],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  mono: ['Share Tech Mono', 'monospace'],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  oswald: ['Oswald', 'sans-serif']
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  animation: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'pop': 'pop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'shake-hard': 'shakeHard 0.4s ease-in-out',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'flip': 'flip 0.6s ease-in-out forwards',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'fade-in': 'fadeIn 0.8s ease-out forwards',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'float-up': 'floatUp 1.5s ease-out forwards',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'pulse-glow': 'pulseGlow 1.5s infinite',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'slide-up': 'slideUp 0.4s ease-out forwards'
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  keyframes: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  pop: { '0%': { transform: 'scale(0.9)', opacity: '0' }, '100%': { transform: 'scale(1)', opacity: '1' } },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  shakeHard: { '0%, 100%': { transform: 'translateX(0)' }, '10%, 30%, 50%, 70%, 90%': { transform: 'translateX(-5px)' }, '20%, 40%, 60%, 80%': { transform: 'translateX(5px)' } },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  flip: { '0%': { transform: 'rotateY(0)' }, '100%': { transform: 'rotateY(180deg)' } },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fadeIn: { '0%': { opacity: '0' }, '100%': { opacity: '1' } },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  floatUp: { '0%': { transform: 'translateY(0) scale(1)', opacity: '1' }, '100%': { transform: 'translateY(-50px) scale(1.2)', opacity: '0' } },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  pulseGlow: { '0%, 100%': { boxShadow: '0 0 10px #FFD700' }, '50%': { boxShadow: '0 0 25px #FFD700' } },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  slideUp: { '0%': { transform: 'translateY(50px)', opacity: '0' }, '100%': { transform: 'translateY(0)', opacity: '1' } }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  </script>
Â  Â  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&family=Oswald:wght@500&family=Share+Tech+Mono&display=swap" rel="stylesheet">
Â  Â  <style>
Â  Â  Â  Â  body { background-color: #020617; color: #fff; overflow: hidden; touch-action: manipulation; }
Â  Â  Â  Â  .glass-panel { background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(20px); border-top: 1px solid rgba(255, 255, 255, 0.08); }
Â  Â  Â  Â  .gold-glow { text-shadow: 0 0 15px rgba(255, 215, 0, 0.6); }
Â  Â  Â  Â  .luxury-bg { background-image: radial-gradient(circle at center, #1e293b 0%, #020617 100%); }
Â  Â  Â  Â  input, select, button { outline: none; -webkit-tap-highlight-color: transparent; }
Â  Â  Â  Â  ::-webkit-scrollbar { width: 0px; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* Range Input Styling */
Â  Â  Â  Â  input[type=range] { -webkit-appearance: none; width: 100%; background: transparent; }
Â  Â  Â  Â  input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 24px; width: 24px; border-radius: 50%; background: #FFD700; cursor: pointer; margin-top: -10px; box-shadow: 0 0 10px #FFD700; border: 2px solid white; }
Â  Â  Â  Â  input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 4px; cursor: pointer; background: #334155; border-radius: 2px; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .perspective-1000 { perspective: 1000px; }
Â  Â  Â  Â  .transform-style-3d { transform-style: preserve-3d; }
Â  Â  Â  Â  .backface-hidden { backface-visibility: hidden; }
Â  Â  Â  Â  .rotate-y-180 { transform: rotateY(180deg); }

Â  Â  Â  Â  .confetti-piece { position: absolute; width: 8px; height: 8px; background: #FFD700; animation: fall 3s linear forwards; pointer-events: none; z-index: 100; }
Â  Â  Â  Â  @keyframes fall { to { transform: translateY(100vh) rotate(720deg); opacity: 0; } }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* Button Click Effect */
Â  Â  Â  Â  .btn-press:active { transform: scale(0.95); transition: transform 0.1s; }
Â  Â  </style>
</head>
<body>
Â  Â  <div id="root"></div>

Â  Â  <script type="importmap">
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  "imports": {
Â  Â  Â  Â  Â  Â  Â  Â  "react": "https://esm.sh/react@18.2.0",
Â  Â  Â  Â  Â  Â  Â  Â  "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
Â  Â  Â  Â  Â  Â  Â  Â  "lucide-react": "https://esm.sh/lucide-react@0.294.0",
Â  Â  Â  Â  Â  Â  Â  Â  "firebase/app": "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js",
Â  Â  Â  Â  Â  Â  Â  Â  "firebase/firestore": "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js"
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  </script>

Â  Â  <script type="module">
Â  Â  Â  Â  import React, { useState, useEffect, useRef } from 'react';
Â  Â  Â  Â  import { createRoot } from 'react-dom/client';
Â  Â  Â  Â  import { User, Gamepad2, LogOut, Send, CheckCircle, XCircle, ChevronRight, ChevronLeft, Lock, Gem, Home, CreditCard, Wallet, ShieldCheck, Trophy, Instagram, Facebook, ExternalLink, Plus, Trash2, Smartphone, Zap, Check, Dices, RefreshCw, Menu, X, AlertTriangle, Settings, History, Globe, FileText, LifeBuoy, ArrowLeftRight, Bomb, ArrowUp, HelpCircle, Flame, Percent, DollarSign, Image as ImageIcon, KeyRound, Upload, Disc } from 'lucide-react';
Â  Â  Â  Â  import { initializeApp } from 'firebase/app';
Â  Â  Â  Â  import { getFirestore, collection, addDoc, updateDoc, doc, onSnapshot, query, where, getDocs, orderBy, setDoc, getDoc } from 'firebase/firestore';

Â  Â  Â  Â  // --- 1. FIREBASE CONFIG ---
Â  Â  Â  Â  const firebaseConfig = {
Â  Â  Â  Â  Â  Â  apiKey: "AIzaSyDJ5B7MncMfyjwb0ZnZ8p3d0bsoQAFqZQY",
Â  Â  Â  Â  Â  Â  authDomain: "cd0777-casino.firebaseapp.com",
Â  Â  Â  Â  Â  Â  projectId: "cd0777-casino",
Â  Â  Â  Â  Â  Â  storageBucket: "cd0777-casino.firebasestorage.app",
Â  Â  Â  Â  Â  Â  messagingSenderId: "320546250152",
Â  Â  Â  Â  Â  Â  appId: "1:320546250152:web:730f6e581267b9b315919d"
Â  Â  Â  Â  };
Â  Â  Â  Â  const app = initializeApp(firebaseConfig);
Â  Â  Â  Â  const db = getFirestore(app);

Â  Â  Â  Â  // --- CONSTANTS & TEXTS ---
Â  Â  Â  Â  const COUNTRIES = [
Â  Â  Â  Â  Â  Â  { code: 'MA', name: 'Morocco', dial: '+212', flag: 'ðŸ‡²ðŸ‡¦' },
Â  Â  Â  Â  Â  Â  { code: 'DZ', name: 'Algeria', dial: '+213', flag: 'ðŸ‡©ðŸ‡¿' },
Â  Â  Â  Â  Â  Â  { code: 'EG', name: 'Egypt', dial: '+20', flag: 'ðŸ‡ªðŸ‡¬' },
Â  Â  Â  Â  Â  Â  { code: 'SA', name: 'Saudi Arabia', dial: '+966', flag: 'ðŸ‡¸ðŸ‡¦' },
Â  Â  Â  Â  Â  Â  { code: 'AE', name: 'UAE', dial: '+971', flag: 'ðŸ‡¦ðŸ‡ª' },
Â  Â  Â  Â  Â  Â  { code: 'KW', name: 'Kuwait', dial: '+965', flag: 'ðŸ‡°ðŸ‡¼' },
Â  Â  Â  Â  Â  Â  { code: 'QA', name: 'Qatar', dial: '+974', flag: 'ðŸ‡¶ðŸ‡¦' },
Â  Â  Â  Â  Â  Â  { code: 'US', name: 'USA', dial: '+1', flag: 'ðŸ‡ºðŸ‡¸' },
Â  Â  Â  Â  Â  Â  { code: 'EU', name: 'Europe', dial: '+', flag: 'ðŸŒ' }
Â  Â  Â  Â  ];

Â  Â  Â  Â  const TEXTS = {
Â  Â  Â  Â  Â  Â  ar: {
Â  Â  Â  Â  Â  Â  Â  Â  welcome: "Ù…Ø±Ø­Ø¨Ø§Ù‹", login: "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„", register: "Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨",
Â  Â  Â  Â  Â  Â  Â  Â  name: "Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„", phone: "Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ", user: "Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…", pass: "ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",
Â  Â  Â  Â  Â  Â  Â  Â  home: "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©", casino: "ÙƒØ§Ø²ÙŠÙ†Ùˆ", tasks: "Ø§Ù„Ù…Ù‡Ø§Ù…", wallet: "Ø§Ù„Ù…Ø­ÙØ¸Ø©",
Â  Â  Â  Â  Â  Â  Â  Â  deposit: "Ø´Ø­Ù† Ø§Ù„Ø­Ø³Ø§Ø¨", withdraw: "Ø³Ø­Ø¨ Ø§Ù„Ø§Ø±Ø¨Ø§Ø­", offers: "Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø®Ø§ØµØ©",
Â  Â  Â  Â  Â  Â  Â  Â  dice: "Ø§Ù„Ù†Ø±Ø¯", plinko: "Ø¥Ø³Ù‚Ø§Ø·", mines: "Ø§Ù„Ø£Ù„ØºØ§Ù…", wheel: "Ø§Ù„Ø¹Ø¬Ù„Ø©",
Â  Â  Â  Â  Â  Â  Â  Â  menu: "Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©", settings: "Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª", logout: "Ø®Ø±ÙˆØ¬",
Â  Â  Â  Â  Â  Â  Â  Â  success: "Ø¹Ù…Ù„ÙŠØ© Ù†Ø§Ø¬Ø­Ø©", error: "Ø­Ø¯Ø« Ø®Ø·Ø£",
Â  Â  Â  Â  Â  Â  Â  Â  safe_mode_limit: "ØªÙ†Ø¨ÙŠÙ‡: Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ø±Ù‡Ø§Ù† ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¢Ù…Ù† Ù‡Ùˆ 10 Ø¹Ù…Ù„Ø§Øª",
Â  Â  Â  Â  Â  Â  Â  Â  you_get: "Ù„Ù‚Ø¯ Ø±Ø¨Ø­Øª", you_lose: "Ø­Ø¸ Ø£ÙˆÙØ±",
Â  Â  Â  Â  Â  Â  Â  Â  upload_proof: "Ø±ÙØ¹ Ø¥Ø«Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹", amount: "Ø§Ù„Ù…Ø¨Ù„Øº", pay_method: "Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹",
Â  Â  Â  Â  Â  Â  Â  Â  forgot_pass: "Ù†Ø³ÙŠØª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±ØŸ", reset_req: "Ø·Ù„Ø¨ Ø§Ø³ØªØ¹Ø§Ø¯Ø©",
Â  Â  Â  Â  Â  Â  Â  Â  change_pass: "ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±", old_pass: "ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©", new_pass: "ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©",
Â  Â  Â  Â  Â  Â  Â  Â  admin_panel: "Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…", approve: "Ù‚Ø¨ÙˆÙ„", reject: "Ø±ÙØ¶",
Â  Â  Â  Â  Â  Â  Â  Â  payment_info: "Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯ÙØ¹", offer_title: "Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¹Ø±Ø¶", offer_desc: "ÙˆØµÙ Ø§Ù„Ø¹Ø±Ø¶",
Â  Â  Â  Â  Â  Â  Â  Â  active: "Ù†Ø´Ø·", review: "Ù…Ø±Ø§Ø¬Ø¹Ø©", play: "Ù„Ø¹Ø¨", done: "Ù…ÙƒØªÙ…Ù„", execute: "Ù†ÙØ°",
Â  Â  Â  Â  Â  Â  Â  Â  win_chance: "ÙØ±ØµØ© Ø§Ù„ÙÙˆØ²", payout: "Ø§Ù„Ø¹Ø§Ø¦Ø¯", roll_under: "ØªØ­Øª", inputs_err: "Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù†Ø§Ù‚ØµØ©",
Â  Â  Â  Â  Â  Â  Â  Â  personal_info: "Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©", no_tasks: "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‡Ø§Ù… Ø­Ø§Ù„ÙŠØ§Ù‹"
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  en: {
Â  Â  Â  Â  Â  Â  Â  Â  welcome: "Welcome", login: "Login", register: "Register",
Â  Â  Â  Â  Â  Â  Â  Â  name: "Full Name", phone: "Phone", user: "Username", pass: "Password",
Â  Â  Â  Â  Â  Â  Â  Â  home: "Home", casino: "Casino", tasks: "Tasks", wallet: "Wallet",
Â  Â  Â  Â  Â  Â  Â  Â  deposit: "Deposit", withdraw: "Withdraw", offers: "Special Offers",
Â  Â  Â  Â  Â  Â  Â  Â  dice: "Dice", plinko: "Plinko", mines: "Mines",
Â  Â  Â  Â  Â  Â  Â  Â  menu: "Menu", settings: "Settings", logout: "Logout",
Â  Â  Â  Â  Â  Â  Â  Â  success: "Success", error: "Error",
Â  Â  Â  Â  Â  Â  Â  Â  safe_mode_limit: "Alert: Max bet in Safe Mode is 10 coins",
Â  Â  Â  Â  Â  Â  Â  Â  you_get: "YOU WIN", you_lose: "YOU LOSE",
Â  Â  Â  Â  Â  Â  Â  Â  upload_proof: "Upload Proof", amount: "Amount", pay_method: "Payment Method",
Â  Â  Â  Â  Â  Â  Â  Â  forgot_pass: "Forgot Password?", reset_req: "Request Reset",
Â  Â  Â  Â  Â  Â  Â  Â  change_pass: "Change Password", old_pass: "Old Password", new_pass: "New Password",
Â  Â  Â  Â  Â  Â  Â  Â  admin_panel: "Admin Panel", approve: "Approve", reject: "Reject",
Â  Â  Â  Â  Â  Â  Â  Â  payment_info: "Payment Info", offer_title: "Offer Title", offer_desc: "Offer Desc",
Â  Â  Â  Â  Â  Â  Â  Â  active: "Active", review: "Review", play: "Play", done: "Done", execute: "Execute",
Â  Â  Â  Â  Â  Â  Â  Â  win_chance: "Win Chance", payout: "Payout", roll_under: "Roll Under", inputs_err: "Missing Inputs",
Â  Â  Â  Â  Â  Â  Â  Â  personal_info: "Personal Info", no_tasks: "No Tasks"
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };

Â  Â  Â  Â  const LINKS = {
Â  Â  Â  Â  Â  Â  TELEGRAM: "https://t.me/cd0777cc",
Â  Â  Â  Â  Â  Â  ONEXBET: "https://1xlite-81807.bar/mobile?bf=cb1696c403824_11662230653"
Â  Â  Â  Â  };

Â  Â  Â  Â  // --- COMPONENTS ---
Â  Â  Â  Â  const Button = ({ children, onClick, disabled, variant='gold', full, className='', icon: Icon }) => {
Â  Â  Â  Â  Â  Â  const base = "relative font-bold py-3.5 px-6 rounded-xl transition-all flex items-center justify-center gap-2 btn-press disabled:opacity-50 disabled:grayscale";
Â  Â  Â  Â  Â  Â  const styles = {
Â  Â  Â  Â  Â  Â  Â  Â  gold: 'bg-gradient-to-b from-[#FFD700] to-[#B8860B] text-black shadow-[0_4px_15px_rgba(255,215,0,0.3)] border border-[#FFD700]',
Â  Â  Â  Â  Â  Â  Â  Â  green: 'bg-gradient-to-b from-emerald-500 to-emerald-700 text-white border border-emerald-500 shadow-[0_4px_15px_rgba(16,185,129,0.3)]',
Â  Â  Â  Â  Â  Â  Â  Â  red: 'bg-gradient-to-b from-red-500 to-red-700 text-white border border-red-500 shadow-[0_4px_15px_rgba(239,68,68,0.3)]',
Â  Â  Â  Â  Â  Â  Â  Â  dark: 'bg-dark-800 text-gold-500 border border-gold-500/30 hover:bg-dark-700'
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  return React.createElement('button', { onClick, disabled, className: `${base} ${styles[variant]} ${full?'w-full':''} ${className}` },Â 
Â  Â  Â  Â  Â  Â  Â  Â  Icon && React.createElement(Icon, { size: 20 }),
Â  Â  Â  Â  Â  Â  Â  Â  children
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  };

Â  Â  Â  Â  const Input = (props) => React.createElement('div', { className: "relative group w-full" },
Â  Â  Â  Â  Â  Â  props.icon && React.createElement(props.icon, { size: 18, className: "absolute top-1/2 -translate-y-1/2 right-4 text-gray-500 group-focus-within:text-gold-500 transition-colors" }),
Â  Â  Â  Â  Â  Â  React.createElement('input', { ...props, className: `w-full bg-dark-900 border border-white/10 p-4 ${props.icon?'pr-12':''} rounded-xl text-white outline-none focus:border-gold-500 focus:shadow-[0_0_10px_rgba(255,215,0,0.2)] transition-all placeholder:text-gray-600 shadow-inner ${props.className}` })
Â  Â  Â  Â  );

Â  Â  Â  Â  // --- UTILS ---
Â  Â  Â  Â  const compressImage = (file) => new Promise((resolve) => {
Â  Â  Â  Â  Â  Â  const reader = new FileReader();
Â  Â  Â  Â  Â  Â  reader.readAsDataURL(file);
Â  Â  Â  Â  Â  Â  reader.onload = (event) => {
Â  Â  Â  Â  Â  Â  Â  Â  const img = new Image();
Â  Â  Â  Â  Â  Â  Â  Â  img.src = event.target.result;
Â  Â  Â  Â  Â  Â  Â  Â  img.onload = () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const canvas = document.createElement('canvas');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const ctx = canvas.getContext('2d');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const scale = 600 / Math.max(img.width, img.height);Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  canvas.width = img.width * scale;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  canvas.height = img.height * scale;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  resolve(canvas.toDataURL('image/jpeg', 0.6));
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  Â  Â  const triggerConfetti = () => {
Â  Â  Â  Â  Â  Â  const colors = ['#FFD700', '#FFFFFF', '#FFA500'];
Â  Â  Â  Â  Â  Â  for(let i=0; i<50; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  const el = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  el.className = 'confetti-piece';
Â  Â  Â  Â  Â  Â  Â  Â  el.style.left = Math.random() * 100 + 'vw';
Â  Â  Â  Â  Â  Â  Â  Â  el.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
Â  Â  Â  Â  Â  Â  Â  Â  el.style.animationDuration = (Math.random() * 2 + 1) + 's';
Â  Â  Â  Â  Â  Â  Â  Â  document.body.appendChild(el);
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => el.remove(), 3000);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };

Â  Â  Â  Â  // --- APP ROOT ---
Â  Â  Â  Â  export default function App() {
Â  Â  Â  Â  Â  Â  const [splash, setSplash] = useState(true);
Â  Â  Â  Â  Â  Â  const [user, setUser] = useState(null);
Â  Â  Â  Â  Â  Â  const [view, setView] = useState('auth');Â 
Â  Â  Â  Â  Â  Â  const [lang, setLang] = useState('ar');
Â  Â  Â  Â  Â  Â  const [notify, setNotify] = useState(null);
Â  Â  Â  Â  Â  Â  const [menuOpen, setMenuOpen] = useState(false);
Â  Â  Â  Â  Â  Â  const [settings, setSettings] = useState({});

Â  Â  Â  Â  Â  Â  const t = (k) => TEXTS[lang][k] || k;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  useEffect(() => { setTimeout(() => setSplash(false), 2500); }, []);
Â  Â  Â  Â  Â  Â  useEffect(() => { if(db) onSnapshot(doc(db, "settings", "global"), (s) => s.exists() && setSettings(s.data())); }, []);

Â  Â  Â  Â  Â  Â  useEffect(() => {
Â  Â  Â  Â  Â  Â  Â  Â  const uid = localStorage.getItem('cd0777_uid');
Â  Â  Â  Â  Â  Â  Â  Â  if (uid && db) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const unsub = onSnapshot(doc(db, "users", uid), (s) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (s.exists()) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setUser({ id: s.id, ...s.data() });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(view === 'auth') setView(s.data().role==='admin'?'admin':'home');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setUser(null); localStorage.removeItem('cd0777_uid'); setView('auth');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }, err => showMsg("Connection Error", 'error'));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return () => unsub();
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }, []);

Â  Â  Â  Â  Â  Â  const showMsg = (msg, type='success') => {Â 
Â  Â  Â  Â  Â  Â  Â  Â  setNotify({msg, type});Â 
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(()=>setNotify(null), 3000);Â 
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const navTo = (v) => { setView(v); setMenuOpen(false); };
Â  Â  Â  Â  Â  Â  const logout = () => { localStorage.removeItem('cd0777_uid'); setUser(null); setView('auth'); };

Â  Â  Â  Â  Â  Â  const isRTL = lang === 'ar';
Â  Â  Â  Â  Â  Â  const ArrowIcon = isRTL ? ChevronRight : ChevronLeft;

Â  Â  Â  Â  Â  Â  if (splash) return React.createElement(SplashScreen);

Â  Â  Â  Â  Â  Â  if (!user && view === 'auth') return React.createElement(AuthScreen, { setUser, setView, showMsg, t, lang, setLang });
Â  Â  Â  Â  Â  Â  if (!user && view === 'forgot') return React.createElement(ForgotPassScreen, { setView, showMsg, t, ArrowIcon });
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (user?.role === 'admin' && view === 'admin') return React.createElement(AdminPanel, { user, logout, db });

Â  Â  Â  Â  Â  Â  // Games
Â  Â  Â  Â  Â  Â  if (view === 'game-dice') return React.createElement(DiceGame, { user, back: ()=>navTo('casino'), showMsg, ArrowIcon, t });
Â  Â  Â  Â  Â  Â  if (view === 'game-plinko') return React.createElement(PlinkoGame, { user, back: ()=>navTo('casino'), showMsg, ArrowIcon, t });
Â  Â  Â  Â  Â  Â  if (view === 'game-tower') return React.createElement(TowerGame, { user, back: ()=>navTo('casino'), showMsg, ArrowIcon, t });
Â  Â  Â  Â  Â  Â  if (view === 'game-mines') return React.createElement(MinesGame, { user, back: ()=>navTo('casino'), showMsg, ArrowIcon, t });
Â  Â  Â  Â  Â  Â  if (view === 'game-wheel') return React.createElement(WheelGame, { user, back: ()=>navTo('casino'), showMsg, ArrowIcon, t });

Â  Â  Â  Â  Â  Â  return React.createElement('div', { className: `h-screen flex flex-col bg-dark-950 text-white relative selection:bg-gold-500 selection:text-black`, dir: isRTL ? 'rtl' : 'ltr' },
Â  Â  Â  Â  Â  Â  Â  Â  notify && React.createElement('div', { className: `fixed top-6 left-1/2 -translate-x-1/2 z-[100] px-6 py-3 rounded-xl shadow-2xl border flex items-center gap-3 animate-pop glass-panel w-max max-w-[90%] ${notify.type==='error'?'bg-red-950/90 border-red-500':'bg-green-950/90 border-green-500'}` },Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  notify.type==='success'?React.createElement(CheckCircle,{size:24, className:"text-green-400"}):React.createElement(XCircle,{size:24, className:"text-red-400"}),Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('span', { className: "font-bold text-sm" }, notify.msg)
Â  Â  Â  Â  Â  Â  Â  Â  ),
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(Header, { user, toggleMenu: ()=>setMenuOpen(true) }),
Â  Â  Â  Â  Â  Â  Â  Â  menuOpen && React.createElement(Sidebar, { user, close: ()=>setMenuOpen(false), navTo, t, lang, setLang, settings, logout }),
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('main', { className: "flex-1 overflow-y-auto p-5 pb-28 z-10 scrollbar-hide" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  view === 'home' && React.createElement(HomeScreen, { user, navTo, t }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  view === 'casino' && React.createElement(CasinoScreen, { navTo, t }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  view === 'tasks' && React.createElement(TasksScreen, { user, showMsg, t }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  view === 'profile' && React.createElement(WalletScreen, { user, showMsg, t, isRTL, navTo }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  view === 'deposit' && React.createElement(DepositScreen, { user, showMsg, t, settings, back: ()=>navTo('profile') }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  view === 'withdraw' && React.createElement(WithdrawScreen, { user, showMsg, t, back: ()=>navTo('profile') }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  view === 'history' && React.createElement(HistoryScreen, { user, t }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  view === 'settings' && React.createElement(SettingsScreen, { user, showMsg, t }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  view === 'terms' && React.createElement(InfoPage, { title: t('terms'), content: settings.terms || "Terms..." }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  view === 'policy' && React.createElement(InfoPage, { title: t('policy'), content: settings.policy || "Policy..." })
Â  Â  Â  Â  Â  Â  Â  Â  ),

Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('nav', { className: "fixed bottom-4 left-4 right-4 h-16 glass-panel rounded-2xl z-40 flex justify-around items-center shadow-2xl border border-white/10 backdrop-blur-md" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(NavBtn, { icon: Home, label: t('home'), active: view==='home', onClick:()=>navTo('home') }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(NavBtn, { icon: Dices, label: t('casino'), active: view==='casino', onClick:()=>navTo('casino') }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(NavBtn, { icon: Trophy, label: t('tasks'), active: view==='tasks', onClick:()=>navTo('tasks') }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(NavBtn, { icon: Wallet, label: t('wallet'), active: view==='profile', onClick:()=>navTo('profile') })
Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- SPLASH SCREEN ---
Â  Â  Â  Â  function SplashScreen() {
Â  Â  Â  Â  Â  Â  return React.createElement('div', { className: "fixed inset-0 bg-black z-[100] flex flex-col items-center justify-center" },
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "relative w-40 h-40 flex items-center justify-center animate-pop" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "absolute inset-0 border-4 border-gold-500 rotate-45 rounded-xl shadow-[0_0_50px_#FFD700]" }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "absolute inset-2 border-2 border-white/20 rotate-45 rounded-lg" }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('h1', { className: "text-7xl font-black text-transparent bg-clip-text bg-gradient-to-tr from-gold-300 to-gold-600 font-oswald tracking-tighter" }, "CD")
Â  Â  Â  Â  Â  Â  Â  Â  ),
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "mt-8 text-gold-500/50 text-sm tracking-[0.5em] font-light animate-pulse" }, "ROYAL CLUB")
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- COMPONENTS ---
Â  Â  Â  Â  function Header({ user, toggleMenu }) {
Â  Â  Â  Â  Â  Â  return React.createElement('div', { className: "sticky top-0 z-40 bg-dark-950/80 backdrop-blur-md border-b border-white/5 px-5 py-4 flex justify-between items-center" },
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex items-center gap-3" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('button', { onClick: toggleMenu, className: "p-2 bg-dark-900 rounded-xl text-gold-500 border border-white/5 btn-press" }, React.createElement(Menu, { size: 24 })),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "w-9 h-9 rounded-xl bg-gradient-to-tr from-gold-400 to-gold-600 flex items-center justify-center font-black text-black text-sm shadow-lg" }, "CD")
Â  Â  Â  Â  Â  Â  Â  Â  ),
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "bg-dark-900 border border-white/10 px-4 py-1.5 rounded-full flex items-center gap-2" },Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(Gem, { size: 16, className: "text-gold-500 animate-pulse" }),Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('span', { className: "text-gold-500 font-mono font-bold text-sm" }, user.coins.toLocaleString())
Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  }

Â  Â  Â  Â  function Sidebar({ user, close, navTo, t, lang, setLang, settings, logout }) {
Â  Â  Â  Â  Â  Â  return React.createElement('div', { className: "fixed inset-0 z-50 flex" },
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "absolute inset-0 bg-black/80 backdrop-blur-md transition-opacity", onClick: close }),
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: `relative w-72 bg-dark-900 border-l border-gold-500/20 h-full p-6 shadow-2xl flex flex-col ${lang==='ar'?'animate-slide-in-right':'animate-slide-in-left'}` },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex justify-between items-center mb-8 border-b border-white/10 pb-4" }, React.createElement('h2',{className:"text-gold-500 font-bold text-2xl"}, t('menu')), React.createElement('button',{onClick:close},React.createElement(X, {className:"text-gray-400"}))),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('nav', { className: "space-y-2 flex-1 overflow-y-auto" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(SidebarBtn, { icon: Home, label: t('home'), onClick:()=>navTo('home') }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(SidebarBtn, { icon: Dices, label: t('casino'), onClick:()=>navTo('casino') }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(SidebarBtn, { icon: Wallet, label: t('wallet'), onClick:()=>navTo('profile') }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', {className:"h-px bg-white/5 my-3"}),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(SidebarBtn, { icon: History, label: t('history'), onClick:()=>navTo('history') }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(SidebarBtn, { icon: Settings, label: t('settings'), onClick:()=>navTo('settings') }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', {className:"h-px bg-white/5 my-3"}),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  settings.support && React.createElement(SidebarBtn, { icon: LifeBuoy, label: t('support'), onClick:()=>window.open(settings.support) }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('button', { onClick: ()=>{const l=lang==='ar'?'en':'ar'; setLang(l); localStorage.setItem('cd0777_lang',l);}, className: "w-full flex items-center justify-between p-3.5 rounded-xl text-gray-300 hover:bg-white/5 mt-4 border border-white/5 btn-press" }, React.createElement('div', {className:"flex gap-4"}, React.createElement(Globe), t('lang')), React.createElement('span', {className:"text-gold-500 text-xs bg-black px-2 py-1 rounded"}, lang==='ar'?'English':'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©'))
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('button', { onClick:logout, className: "mt-auto w-full flex items-center justify-center gap-2 text-red-400 p-4 bg-red-900/10 rounded-2xl font-bold border border-red-900/30 btn-press" }, React.createElement(LogOut), t('logout'))
Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  }
Â  Â  Â  Â  const SidebarBtn = ({ icon: Icon, label, onClick }) => React.createElement('button', { onClick, className: "w-full flex items-center gap-4 p-3.5 rounded-xl text-gray-300 hover:bg-white/5 btn-press" }, React.createElement(Icon, { size: 20 }), React.createElement('span', {}, label));
Â  Â  Â  Â  const NavBtn = ({ icon: Icon, label, active, onClick }) => React.createElement('button', { onClick, className: `flex flex-col items-center gap-1 transition-all ${active?'text-gold-500 -translate-y-1 scale-110':'text-gray-500'}` }, React.createElement(Icon, { size: 24, strokeWidth: active?2.5:2 }), React.createElement('span', { className: "text-[9px] font-bold" }, label));

Â  Â  Â  Â  // --- AUTH ---
Â  Â  Â  Â  function AuthScreen({ setUser, setView, showMsg, t, lang, setLang }) {
Â  Â  Â  Â  Â  Â  const [isReg, setIsReg] = useState(false); const [country, setCountry] = useState(COUNTRIES[0]); const [f, setF] = useState({ u:'', p:'', n:'', ph:'' });
Â  Â  Â  Â  Â  Â  const submit = async () => {
Â  Â  Â  Â  Â  Â  Â  Â  if(!f.u || !f.p) return showMsg(t('inputs_err'), 'error');
Â  Â  Â  Â  Â  Â  Â  Â  if(f.u==='admin' && f.p==='admin123') { localStorage.setItem('cd0777_uid', 'admin'); setUser({role:'admin'}); setView('admin'); return; }
Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(isReg) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const q = query(collection(db, "users"), where("username", "==", f.u)); if(!(await getDocs(q)).empty) throw new Error('Username taken');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const sz = (await getDocs(collection(db, "users"))).size;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const nu = { username: f.u, password: f.p, fullName: f.n, phone: f.ph, memberId: `CD${1001+sz}`, role: 'user', status: 'pending', coins: 100, balance: 0, completedTasks: [] };
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const ref = await addDoc(collection(db, "users"), nu); localStorage.setItem('cd0777_uid', ref.id); setUser({id:ref.id, ...nu}); setView('home');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const q = query(collection(db, "users"), where("username", "==", f.u), where("password", "==", f.p)); const s = await getDocs(q);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(s.empty) throw new Error('Invalid credentials'); const d=s.docs[0]; localStorage.setItem('cd0777_uid', d.id); setUser({id:d.id, ...d.data()}); setView('home');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  } catch(e) { showMsg(e.message, 'error'); }
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  return React.createElement('div', { className: "h-full flex flex-col items-center justify-center p-6 bg-dark-950 luxury-bg relative animate-fade-in", dir: lang==='ar'?'rtl':'ltr' },
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('button', { onClick: ()=>setLang(lang==='ar'?'en':'ar'), className: "absolute top-6 right-6 text-xs bg-white/10 px-3 py-1 rounded-full text-gold-500 font-bold" }, lang.toUpperCase()),
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "w-32 h-32 rounded-3xl bg-gradient-to-tr from-gold-400 to-gold-700 flex items-center justify-center text-6xl font-black text-black mb-8 shadow-2xl shadow-gold-500/20 border-4 border-gold-300" }, "CD"),
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "w-full max-w-sm space-y-4" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('h1', { className: "text-3xl font-bold text-center text-gold-500 mb-6 font-oswald tracking-widest uppercase" }, isReg ? t('register') : t('login')),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isReg && React.createElement(Input, { icon: User, placeholder: t('name'), onChange: e=>setF({...f,n:e.target.value}) }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isReg && React.createElement(Input, { icon: Smartphone, placeholder: t('phone'), onChange: e=>setF({...f,ph:e.target.value}) }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(Input, { icon: User, placeholder: t('user'), onChange: e=>setF({...f,u:e.target.value}) }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(Input, { icon: Lock, type: "password", placeholder: t('pass'), onChange: e=>setF({...f,p:e.target.value}) }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  !isReg && React.createElement('button', { onClick: ()=>setView('forgot'), className: "text-xs text-gold-500 hover:underline w-full text-right" }, t('forgot_pass')),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(Button, { full: true, onClick: submit }, isReg?t('register'):t('login')),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('button', { onClick: ()=>setIsReg(!isReg), className: "w-full text-center text-xs text-slate-500 mt-4 hover:text-gold-500 transition-colors" }, isReg?t('welcome'):t('register'))
Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  }

Â  Â  Â  Â  function ForgotPassScreen({ setView, showMsg, t, ArrowIcon }) {
Â  Â  Â  Â  Â  Â  const [u, setU] = useState('');
Â  Â  Â  Â  Â  Â  const req = async () => {
Â  Â  Â  Â  Â  Â  Â  Â  if(!u) return showMsg(t('inputs_err'), 'error');
Â  Â  Â  Â  Â  Â  Â  Â  await addDoc(collection(db, "password_resets"), { username: u, status: 'pending', date: new Date().toISOString() });
Â  Â  Â  Â  Â  Â  Â  Â  showMsg(t('success')); setView('auth');
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  return React.createElement('div', { className: "h-full flex flex-col items-center justify-center p-6 bg-dark-950" },
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('button', { onClick: ()=>setView('auth'), className: "absolute top-6 left-6 text-white" }, React.createElement(ArrowIcon)),
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('h2', { className: "text-2xl text-gold-500 font-bold mb-6" }, t('reset_req')),
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "w-full max-w-sm space-y-4" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(Input, { placeholder: t('user'), value: u, onChange: e=>setU(e.target.value) }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(Button, { full: true, onClick: req }, t('confirm'))
Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- HOME ---
Â  Â  Â  Â  function HomeScreen({ user, navTo, t }) {
Â  Â  Â  Â  Â  Â  const isPending = user.status === 'pending';
Â  Â  Â  Â  Â  Â  return React.createElement('div', { className: "space-y-6 animate-pop" },
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "relative aspect-[1.58/1] rounded-2xl overflow-hidden shadow-2xl border border-white/10 hover:border-gold-500/40 transition-all transform hover:rotate-1" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "absolute inset-0 bg-gradient-to-br from-dark-900 to-black" }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "absolute inset-0 opacity-20", style:{backgroundImage:'radial-gradient(#C0A000 1px, transparent 1px)', backgroundSize:'20px 20px'} }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "relative z-10 h-full p-6 flex flex-col justify-between" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex justify-between items-start" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex items-center gap-2" }, React.createElement(ShieldCheck, { className: "text-gold-500", size: 26 }), React.createElement('h2', { className: "text-gold-500 font-oswald text-xl tracking-widest" }, "CD0777")),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: `px-3 py-1 rounded-full text-[9px] font-black tracking-wider border ${!isPending?'border-green-500 text-green-400':'border-yellow-600 text-yellow-500'}` }, !isPending ? t('active') : t('review'))
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex justify-between items-center" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', {}, React.createElement('p', { className: "text-gray-400 text-[8px] uppercase tracking-widest mb-1 font-bold" }, t('balance')), React.createElement('p', { className: "font-mono text-3xl text-white flex gap-1" }, React.createElement('span', { className: "text-gold-500" }, "$"), Number(user.balance).toFixed(2))),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "text-right" }, React.createElement('p', { className: "text-[7px] text-gold-600 uppercase mb-1 font-bold" }, t('id')), React.createElement('p', { className: "font-mono text-lg text-white border-gold-500 px-2 border-r-2" }, user.memberId))
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex justify-between items-end" }, React.createElement('div', {}, React.createElement('p', { className: "text-[7px] text-gold-600 uppercase mb-0.5 font-bold" }, t('name')), React.createElement('p', { className: "font-mono text-gray-200 text-sm tracking-widest uppercase" }, user.fullName)))
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  Â  Â  ),
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('button', { onClick: ()=>navTo('casino'), className: "w-full h-28 relative rounded-2xl overflow-hidden group active:scale-95 transition-all border border-white/5 hover:border-gold-500/40 shadow-xl" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "absolute inset-0 bg-gradient-to-r from-purple-900/80 to-indigo-900/80" }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "absolute inset-0 flex items-center justify-between p-6" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', {}, React.createElement('h3', { className: "text-2xl font-black italic text-white mb-1 drop-shadow-md" }, "PLAY & WIN"), React.createElement('p', { className: "text-xs text-purple-200 font-bold" }, t('play'))),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(Gamepad2, { size: 50, className: "text-white/20" })
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  }

Â  Â  Â  Â  function CasinoScreen({ navTo, t }) {
Â  Â  Â  Â  Â  Â  return React.createElement('div', { className: "space-y-4 animate-pop" },
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('h2', { className: "text-gold-500 font-bold text-lg flex gap-2 items-center" }, React.createElement(Dices), t('casino')),
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "grid grid-cols-2 gap-4" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(GameCard, { title:t('dice'), sub:t('dice_desc'), color:"blue", icon:Percent, onClick:()=>navTo('game-dice') }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(GameCard, { title:t('plinko'), sub:t('plinko_desc'), color:"purple", icon:Gem, onClick:()=>navTo('game-plinko') }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(GameCard, { title:t('mines'), sub:t('mines_desc'), color:"emerald", icon:Bomb, onClick:()=>navTo('game-mines') }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(GameCard, { title:t('wheel'), sub:"Spin Win", color:"orange", icon:Disc, onClick:()=>navTo('game-wheel') }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(GameCard, { title:t('tower'), sub:t('tower_desc'), color:"green", icon:ArrowUp, onClick:()=>navTo('game-tower') })
Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  }
Â  Â  Â  Â  const GameCard = ({ title, sub, color, icon: Icon, onClick }) => React.createElement('button', { onClick, className: `relative h-32 rounded-2xl overflow-hidden border border-white/5 bg-dark-800 hover:border-${color}-500/50 transition-all group w-full text-right active:scale-95 shadow-lg` }, React.createElement('div', { className: `absolute inset-0 bg-gradient-to-br from-${color}-900/50 to-transparent` }), React.createElement('div', { className: `absolute top-3 left-3 text-${color}-500/20 group-hover:text-${color}-500/40 transition-colors` }, React.createElement(Icon, { size: 60 })), React.createElement('div', { className: "absolute bottom-4 right-4 z-10" }, React.createElement('h3', { className: "text-xl font-black text-white italic" }, title), React.createElement('p', { className: `text-[10px] text-${color}-300 font-bold uppercase` }, sub)));

Â  Â  Â  Â  // --- GAME 1: DICE ---
Â  Â  Â  Â  function DiceGame({ user, back, showMsg, ArrowIcon, t }) {
Â  Â  Â  Â  Â  Â  const [bet, setBet] = useState(100);
Â  Â  Â  Â  Â  Â  const [target, setTarget] = useState(50);
Â  Â  Â  Â  Â  Â  const [result, setResult] = useState(null);
Â  Â  Â  Â  Â  Â  const [rolling, setRolling] = useState(false);
Â  Â  Â  Â  Â  Â  const [win, setWin] = useState(false);

Â  Â  Â  Â  Â  Â  const multiplier = (98 / target).toFixed(4);
Â  Â  Â  Â  Â  Â  const winChance = target;

Â  Â  Â  Â  Â  Â  const roll = async () => {
Â  Â  Â  Â  Â  Â  Â  Â  if (Number(user.coins) < bet) return showMsg(t('no_balance'), 'error');
Â  Â  Â  Â  Â  Â  Â  Â  if (rolling) return;
Â  Â  Â  Â  Â  Â  Â  Â  setRolling(true); setResult(null); setWin(false);
Â  Â  Â  Â  Â  Â  Â  Â  await updateDoc(doc(db,"users",user.id),{coins:Number(user.coins)-bet});
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  let frames = 0;
Â  Â  Â  Â  Â  Â  Â  Â  const anim = setInterval(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setResult(Math.floor(Math.random() * 100));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  frames++;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (frames > 20) { clearInterval(anim); finalizeRoll(); }
Â  Â  Â  Â  Â  Â  Â  Â  }, 50);
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  const finalizeRoll = async () => {
Â  Â  Â  Â  Â  Â  Â  Â  const finalResult = Math.floor(Math.random() * 100);Â 
Â  Â  Â  Â  Â  Â  Â  Â  setResult(finalResult);
Â  Â  Â  Â  Â  Â  Â  Â  const isWin = finalResult < target;
Â  Â  Â  Â  Â  Â  Â  Â  if (isWin) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const winAmount = Math.floor(bet * multiplier);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await updateDoc(doc(db,"users",user.id),{coins:Number(user.coins)+winAmount});
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setWin(true);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMsg(`${t('success')} +${winAmount}`, 'success');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  triggerConfetti();
Â  Â  Â  Â  Â  Â  Â  Â  } else { setWin(false); }
Â  Â  Â  Â  Â  Â  Â  Â  setRolling(false);
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  return React.createElement('div', { className: "fixed inset-0 bg-dark-950 z-50 flex flex-col h-full animate-slide-up" },
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex justify-between items-center p-4 bg-dark-900 border-b border-white/5 shrink-0" },Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('button', { onClick: back, className: "text-slate-400 btn-press" }, React.createElement(ArrowIcon)),Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('span', { className: "font-bold text-blue-500 tracking-widest" }, "DICE"),Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('span', { className: "text-xs font-mono bg-black px-2 py-1 rounded text-gold-500" }, user.coins)
Â  Â  Â  Â  Â  Â  Â  Â  ),
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex-1 flex flex-col items-center justify-center p-6 relative" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "absolute top-10 flex flex-col items-center" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: `text-8xl font-black font-mono transition-all ${rolling ? 'opacity-50 blur-sm' : (win ? 'text-green-500 scale-110 drop-shadow-[0_0_15px_rgba(34,197,94,0.5)]' : (result!==null ? 'text-red-500' : 'text-white'))}` }, result !== null ? result : "00"),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  result !== null && !rolling && React.createElement('div', { className: `text-xl font-bold mt-2 ${win?'text-green-400':'text-red-400'}` }, win ? t('you_get') : t('you_lose'))
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "w-full max-w-md mt-auto mb-10 bg-dark-800 p-6 rounded-3xl border border-white/10 shadow-2xl" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex justify-between mb-6 bg-black/40 p-4 rounded-xl" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "text-center" }, React.createElement('div', { className: "text-xs text-gray-500 uppercase" }, t('payout')), React.createElement('div', { className: "text-2xl font-bold text-gold-500" }, `${multiplier}x`)),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "text-center" }, React.createElement('div', { className: "text-xs text-gray-500 uppercase" }, t('win_chance')), React.createElement('div', { className: "text-2xl font-bold text-blue-400" }, `${winChance}%`))
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "relative h-4 bg-dark-900 rounded-full mb-6 overflow-hidden border border-white/5" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "absolute left-0 top-0 bottom-0 bg-green-500 transition-all duration-300", style: { width: `${target}%` } }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "absolute top-0 bottom-0 w-1 bg-white shadow-[0_0_10px_white] z-10 transition-all duration-300", style: { left: `${target}%` } }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  result !== null && React.createElement('div', { className: "absolute top-[-4px] bottom-[-4px] w-2 bg-gold-500 z-20 border border-black rounded-full transition-all duration-500", style: { left: `${result}%` } })
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('input', { type: "range", min: "2", max: "98", value: target, onChange: (e) => setTarget(Number(e.target.value)), disabled: rolling, className: "w-full accent-gold-500 h-2 bg-transparent appearance-none cursor-pointer" }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "text-center text-xs text-gray-400 mt-2" }, `${t('roll_under')} ${target}`)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  Â  Â  ),
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "p-4 bg-dark-900 border-t border-white/10 flex gap-4 shrink-0 pb-safe items-center" },Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "relative w-24" }, React.createElement('input', { type: "number", value: bet, onChange: e=>setBet(Number(e.target.value)), className: "w-full bg-black border border-white/20 rounded-xl text-center text-white font-bold p-3 outline-none focus:border-gold-500 transition-colors" }), React.createElement(DollarSign, { size: 14, className: "absolute top-1/2 -translate-y-1/2 left-3 text-gold-500" })),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(Button, { full: true, disabled: rolling, onClick: roll }, rolling ? "..." : t('play'))
Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- GAME 2: PLINKO ---
Â  Â  Â  Â  function PlinkoGame({ user, back, showMsg, ArrowIcon, t }) {
Â  Â  Â  Â  Â  Â  const cvsRef = useRef(null);Â 
Â  Â  Â  Â  Â  Â  const [bet, setBet] = useState(100);Â 
Â  Â  Â  Â  Â  Â  const [mode, setMode] = useState('Normal');Â 
Â  Â  Â  Â  Â  Â  const eng = useRef({ balls: [], floaters: [] });
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const changeBet = (val) => {
Â  Â  Â  Â  Â  Â  Â  Â  const v = Number(val);
Â  Â  Â  Â  Â  Â  Â  Â  if (mode === 'Safe' && v > 10) return showMsg(t('safe_limit'), 'error');
Â  Â  Â  Â  Â  Â  Â  Â  setBet(v);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const drop = async () => {Â 
Â  Â  Â  Â  Â  Â  Â  Â  if (mode === 'Safe' && bet > 10) return showMsg(t('safe_limit'), 'error');
Â  Â  Â  Â  Â  Â  Â  Â  if(Number(user.coins) < bet) return showMsg(t('no_balance'), 'error');Â 
Â  Â  Â  Â  Â  Â  Â  Â  await updateDoc(doc(db,"users",user.id),{coins:Number(user.coins)-bet});Â 
Â  Â  Â  Â  Â  Â  Â  Â  eng.current.balls.push({ x: cvsRef.current.width/2 + (Math.random()*4-2), y: 30, vx: Math.random()*2-1, vy: 0, bet, gameMode: mode, trail:[], done: false });Â 
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  useEffect(() => {Â 
Â  Â  Â  Â  Â  Â  Â  Â  const cvs=cvsRef.current; if(!cvs) return;Â 
Â  Â  Â  Â  Â  Â  Â  Â  cvs.width = cvs.offsetWidth; cvs.height = cvs.offsetHeight;Â 
Â  Â  Â  Â  Â  Â  Â  Â  const ctx=cvs.getContext('2d'); const {width:w, height:h} = cvs;Â 
Â  Â  Â  Â  Â  Â  Â  Â  const ROWS = 10; const GAP = w / (ROWS + 2); const cx = w / 2;
Â  Â  Â  Â  Â  Â  Â  Â  const pegs=[]; for(let r=0; r<ROWS; r++) { for(let c=0; c<=r; c++) { pegs.push({x: cx + (c - r/2) * GAP, y: 80 + r * GAP}); }}
Â  Â  Â  Â  Â  Â  Â  Â  const buckets = [];
Â  Â  Â  Â  Â  Â  Â  Â  const mults = mode === 'Normal' ? [10, 5, 2, 0.5, 0.2, 0.2, 0.5, 2, 5, 10] : [5, 3, 2, 1.5, 1.3, 1.2, 1.3, 1.5, 2, 3, 5];Â 
Â  Â  Â  Â  Â  Â  Â  Â  for(let i=0; i<10; i++) buckets.push({ x: cx + (i - 5) * GAP, y: 80 + ROWS * GAP + 20, w: GAP, h: 40, val: mults[i], active: 0 });

Â  Â  Â  Â  Â  Â  Â  Â  let anim;Â 
Â  Â  Â  Â  Â  Â  Â  Â  const update=()=>{Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.clearRect(0,0,w,h);Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  buckets.forEach(b => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(b.active > 0) b.active--;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const isFlash = b.active > 0;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const color = mode==='Safe' ? (isFlash?'#fff':'#10b981') : (b.val<1?'#222':(b.val>=3?'#9333ea':'#eab308'));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(isFlash) { ctx.shadowBlur=20; ctx.shadowColor=color; } else { ctx.shadowBlur=0; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.fillStyle = isFlash ? '#fff' : color; ctx.beginPath(); ctx.roundRect(b.x + 2, b.y, b.w - 4, b.h, 5); ctx.fill();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.shadowBlur=0; ctx.fillStyle = isFlash ? '#000' : '#fff'; ctx.font = 'bold 10px Arial'; ctx.textAlign = 'center'; ctx.fillText(`${b.val}x`, b.x + b.w/2, b.y + 24);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.fillStyle='#fff'; pegs.forEach(p => { ctx.beginPath(); ctx.arc(p.x, p.y, 3, 0, Math.PI*2); ctx.fill(); });Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  eng.current.balls.forEach((b) => {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(b.done) return;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  b.vy += 0.25; b.vx *= 0.98; b.x += b.vx; b.y += b.vy;Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  pegs.forEach(p => { if(Math.sqrt((b.x-p.x)**2 + (b.y-p.y)**2) < 8) { b.vx = (Math.random()-0.5) * 4 + (Math.random() * 0.1); b.vy *= 0.6; b.y -= 2; }});Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(b.y > buckets[0].y) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const bIdx = Math.floor((b.x - (cx - 5*GAP)) / GAP);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(bIdx >= 0 && bIdx < 10) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const targetB = buckets[bIdx]; targetB.active = 15; b.done = true;Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const win = Math.floor(b.bet * targetB.val);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateDoc(doc(db,"users",user.id),{coins: Number(user.coins) + win});
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const isWin = win >= b.bet;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const text = isWin ? `${t('you_get')} ${win}` : t('you_lose');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const color = isWin ? '#4ade80' : '#f87171';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  eng.current.floaters.push({ x: w/2, y: h/2, text, color, life: 1.0 });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.fillStyle = b.gameMode==='Safe' ? '#10b981' : '#FFD700'; ctx.beginPath(); ctx.arc(b.x, b.y, 6, 0, Math.PI*2); ctx.fill();Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  eng.current.floaters.forEach((f) => { f.y -= 1; f.life -= 0.02; ctx.globalAlpha = Math.max(0, f.life); ctx.fillStyle = f.color; ctx.font = '900 24px Cairo'; ctx.textAlign = 'center'; ctx.fillText(f.text, f.x, f.y); ctx.globalAlpha = 1.0; });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  eng.current.floaters = eng.current.floaters.filter(f => f.life > 0);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  eng.current.balls = eng.current.balls.filter(b => !b.done && b.y < h+50);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  anim = requestAnimationFrame(update);Â 
Â  Â  Â  Â  Â  Â  Â  Â  }; update(); return () => cancelAnimationFrame(anim);Â 
Â  Â  Â  Â  Â  Â  }, [user.coins, mode]);Â 
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  return React.createElement('div', { className: "fixed inset-0 bg-dark-950 z-50 flex flex-col h-full animate-slide-up" },Â 
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex justify-between items-center p-4 bg-dark-900 shrink-0" },Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('button',{onClick:back,className:"text-slate-400 btn-press"},React.createElement(ArrowIcon)),Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('span',{className:"font-bold text-purple-500"},TEXTS.ar.plinko),Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('span',{className:"text-xs font-mono bg-black px-2 py-1 rounded text-white"},user.coins)
Â  Â  Â  Â  Â  Â  Â  Â  ),Â 
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex justify-center py-2" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "bg-dark-800 p-1 rounded-xl flex border border-white/10" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('button', { onClick: ()=>setMode('Normal'), className: `px-4 py-1 rounded-lg text-xs font-bold transition-all ${mode==='Normal'?'bg-purple-600 text-white':'text-gray-400'}` }, "Normal"),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('button', { onClick: ()=>setMode('Safe'), className: `px-4 py-1 rounded-lg text-xs font-bold transition-all ${mode==='Safe'?'bg-green-600 text-white':'text-gray-400'}` }, "Safe")
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  Â  Â  ),
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex-1 relative w-full" }, React.createElement('canvas', { ref: cvsRef, className: "w-full h-full block" })),Â 
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "p-4 bg-dark-900 border-t border-white/10 flex gap-4 shrink-0 pb-safe items-center" },Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "relative w-24" }, React.createElement('input', { type: "number", value: bet, onChange: e=>changeBet(e.target.value), className: "w-full bg-black border border-white/20 rounded-xl text-center text-white font-bold p-3 outline-none focus:border-gold-500 transition-colors" }), React.createElement(DollarSign, { size: 14, className: "absolute top-1/2 -translate-y-1/2 left-3 text-gold-500" })),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(Button, { full: true, onClick: drop }, TEXTS.ar.play)
Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- GAME 3: MINES ---
Â  Â  Â  Â  function MinesGame({ user, back, showMsg, ArrowIcon, t }) {
Â  Â  Â  Â  Â  Â  const [revealed, setRevealed] = useState(Array(25).fill(false));
Â  Â  Â  Â  Â  Â  const [mineCount, setMineCount] = useState(3);
Â  Â  Â  Â  Â  Â  const [bet, setBet] = useState(100);
Â  Â  Â  Â  Â  Â  const [playing, setPlaying] = useState(false);
Â  Â  Â  Â  Â  Â  const [mines, setMines] = useState([]);Â 
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const startGame = async () => {
Â  Â  Â  Â  Â  Â  Â  Â  if(Number(user.coins) < bet) return showMsg(t('no_balance'), 'error');
Â  Â  Â  Â  Â  Â  Â  Â  await updateDoc(doc(db,"users",user.id),{coins: Number(user.coins) - bet});
Â  Â  Â  Â  Â  Â  Â  Â  const newMines = [];
Â  Â  Â  Â  Â  Â  Â  Â  while(newMines.length < mineCount) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const r = Math.floor(Math.random() * 25);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(!newMines.includes(r)) newMines.push(r);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  setMines(newMines); setRevealed(Array(25).fill(false)); setPlaying(true);
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  const handleTileClick = (idx) => {
Â  Â  Â  Â  Â  Â  Â  Â  if(!playing || revealed[idx]) return;
Â  Â  Â  Â  Â  Â  Â  Â  const newRevealed = [...revealed]; newRevealed[idx] = true; setRevealed(newRevealed);
Â  Â  Â  Â  Â  Â  Â  Â  if(mines.includes(idx)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setPlaying(false); setRevealed(Array(25).fill(true)); showMsg(t('you_lose'), 'error');
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const revealedCount = newRevealed.filter((r, i) => r && !mines.includes(i)).length;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(revealedCount === 25 - mineCount) cashout(newRevealed);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  const getMultiplier = () => {
Â  Â  Â  Â  Â  Â  Â  Â  const moves = revealed.filter((r, i) => r && !mines.includes(i)).length;
Â  Â  Â  Â  Â  Â  Â  Â  let m = 1.0; for(let i=0; i<moves; i++) m = m * (1 + (mineCount / (25 - mineCount - i)));
Â  Â  Â  Â  Â  Â  Â  Â  return m;
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  const currentWin = Math.floor(bet * getMultiplier());

Â  Â  Â  Â  Â  Â  const cashout = async () => {
Â  Â  Â  Â  Â  Â  Â  Â  if(!playing) return;
Â  Â  Â  Â  Â  Â  Â  Â  await updateDoc(doc(db,"users",user.id),{coins: Number(user.coins) + currentWin});
Â  Â  Â  Â  Â  Â  Â  Â  setPlaying(false); setRevealed(Array(25).fill(true));Â 
Â  Â  Â  Â  Â  Â  Â  Â  showMsg(`${t('you_get')} ${currentWin}`, 'success'); triggerConfetti();
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  return React.createElement('div', { className: "fixed inset-0 bg-dark-950 z-50 flex flex-col h-full animate-slide-up" },
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex justify-between items-center p-4 bg-dark-900 shrink-0" },Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('button',{onClick:back,className:"text-slate-400 btn-press"},React.createElement(ArrowIcon)),Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('span',{className:"font-bold text-emerald-500"}, t('mines')),Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('span',{className:"text-xs bg-black px-2 py-1 rounded"},user.coins)
Â  Â  Â  Â  Â  Â  Â  Â  ),
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex-1 flex flex-col items-center justify-center p-4" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  playing && React.createElement('div', { className: "mb-4 bg-emerald-900/50 px-4 py-2 rounded-xl border border-emerald-500/30" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('span', { className: "text-2xl font-bold text-white" }, `x${getMultiplier().toFixed(2)}`),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "text-xs text-emerald-400 text-center" }, `Win: ${currentWin}`)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "grid grid-cols-5 gap-2 w-full max-w-sm aspect-square" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Array(25).fill(0).map((_, i) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const isRevealed = revealed[i]; const isMine = mines.includes(i);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let content = null; let style = "bg-dark-800 hover:bg-dark-700 border-white/10";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (isRevealed) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (isMine) { content = React.createElement(Bomb, { className: "text-red-500 animate-pop", size: 24 }); style = "bg-red-900/20 border-red-500"; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else { content = React.createElement(Gem, { className: "text-emerald-400 animate-pop", size: 24 }); style = "bg-emerald-900/20 border-emerald-500"; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return React.createElement('button', { key: i, onClick: () => handleTileClick(i), disabled: !playing || isRevealed, className: `rounded-lg border flex items-center justify-center transition-all active:scale-95 ${style}` }, content);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  Â  Â  ),
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "p-4 bg-dark-900 border-t border-white/10 space-y-3 pb-safe" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  !playing ? React.createElement('div', { className: "flex gap-4" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex-1" }, React.createElement('input', { type: "number", min: 1, max: 24, value: mineCount, onChange: e=>setMineCount(Math.min(24, Math.max(1, Number(e.target.value)))), className: "w-full bg-black border border-white/20 rounded-xl p-3 text-center text-white font-bold" })),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex-1" }, React.createElement('input', { type: "number", value: bet, onChange: e=>setBet(Number(e.target.value)), className: "w-full bg-black border border-white/20 rounded-xl p-3 text-center text-white font-bold" }))
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ) : React.createElement(Button, { full: true, variant: "green", onClick: cashout }, `CASHOUT ${currentWin}`),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  !playing && React.createElement(Button, { full: true, onClick: startGame }, t('play'))
Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- GAME 4: WHEEL ---
Â  Â  Â  Â  function WheelGame({ user, back, showMsg, ArrowIcon, t }) {
Â  Â  Â  Â  Â  Â  const [bet, setBet] = useState(100); const [spinning, setSpinning] = useState(false); const [rot, setRot] = useState(0);
Â  Â  Â  Â  Â  Â  const spin = async () => {
Â  Â  Â  Â  Â  Â  Â  Â  if(Number(user.coins)<bet) return showMsg(t('no_balance'),'error');
Â  Â  Â  Â  Â  Â  Â  Â  if(spinning) return;
Â  Â  Â  Â  Â  Â  Â  Â  setSpinning(true); await updateDoc(doc(db,"users",user.id),{coins:Number(user.coins)-bet});
Â  Â  Â  Â  Â  Â  Â  Â  const r = Math.random();Â 
Â  Â  Â  Â  Â  Â  Â  Â  const mult = r < 0.5 ? 0 : (r < 0.8 ? 1.5 : (r < 0.95 ? 2 : 5));
Â  Â  Â  Â  Â  Â  Â  Â  const extraRot = 1080 + (mult===0?0:(mult===1.5?45:(mult===2?90:135))); // Simplified Logic
Â  Â  Â  Â  Â  Â  Â  Â  setRot(rot + extraRot);
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(async () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const win = Math.floor(bet * mult);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(win > 0) { await updateDoc(doc(db,"users",user.id),{coins:Number(user.coins)+win}); showMsg(`${t('you_get')} ${win}`, 'success'); }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else { showMsg(t('you_lose'), 'error'); }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setSpinning(false);
Â  Â  Â  Â  Â  Â  Â  Â  }, 3000);
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  return React.createElement('div', { className: "fixed inset-0 bg-dark-950 z-50 flex flex-col h-full animate-slide-up" },
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "p-4 flex justify-between bg-dark-900" }, React.createElement('button',{onClick:back, className:"text-slate-400 btn-press"},React.createElement(ArrowIcon)), React.createElement('span',{className:"font-bold text-orange-500"},"WHEEL"), React.createElement('span',{className:"font-mono text-gold-500"},user.coins)),
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex-1 flex items-center justify-center relative overflow-hidden" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "absolute top-4 text-gold-500 text-xl font-bold z-10" }, "â–¼"),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "w-64 h-64 rounded-full border-4 border-gold-500 relative transition-transform duration-[3000ms] ease-out", style: { transform: `rotate(${rot}deg)`, background: 'conic-gradient(#222 0deg 90deg, #eab308 90deg 180deg, #222 180deg 270deg, #eab308 270deg 360deg)' } },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "absolute inset-0 flex items-center justify-center text-white font-bold" }, "SPIN")
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  Â  Â  ),
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "p-4 bg-dark-900 flex gap-4 pb-safe" }, React.createElement('input',{type:"number", value:bet, onChange:e=>setBet(Number(e.target.value)), className:"w-24 bg-black border border-white/20 rounded-xl text-center text-white"}), React.createElement(Button, { full: true, disabled: spinning, onClick: spin }, t('play')))
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- GAME 5: TOWER (CARDS) ---
Â  Â  Â  Â  function TowerGame({ user, back, showMsg, ArrowIcon, t }) {
Â  Â  Â  Â  Â  Â  const [level, setLevel] = useState(0);Â 
Â  Â  Â  Â  Â  Â  const [bet, setBet] = useState(100);Â 
Â  Â  Â  Â  Â  Â  const [status, setStatus] = useState('IDLE');Â 
Â  Â  Â  Â  Â  Â  const [gameBoard, setGameBoard] = useState([]);Â 
Â  Â  Â  Â  Â  Â  const [userPicks, setUserPicks] = useState([]);Â 
Â  Â  Â  Â  Â  Â  const [shaking, setShaking] = useState(false);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const generateBoard = () => { const arr = []; for(let i=0; i<10; i++) { arr.push(Math.floor(Math.random() * 3)); } return arr; };

Â  Â  Â  Â  Â  Â  const startGame = async () => {
Â  Â  Â  Â  Â  Â  Â  Â  if(Number(user.coins)<bet) return showMsg(t('no_balance'),'error');
Â  Â  Â  Â  Â  Â  Â  Â  await updateDoc(doc(db,"users",user.id),{coins:Number(user.coins)-bet});
Â  Â  Â  Â  Â  Â  Â  Â  setGameBoard(generateBoard()); setUserPicks([]); setLevel(0); setStatus('PLAYING');
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const handleStep = async (rowIdx, colIdx) => {
Â  Â  Â  Â  Â  Â  Â  Â  if(status !== 'PLAYING' || rowIdx !== level) return;
Â  Â  Â  Â  Â  Â  Â  Â  const newPicks = [...userPicks, {r: rowIdx, c: colIdx}]; setUserPicks(newPicks);
Â  Â  Â  Â  Â  Â  Â  Â  const isBomb = gameBoard[rowIdx] === colIdx;
Â  Â  Â  Â  Â  Â  Â  Â  if (isBomb) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setShaking(true); setTimeout(()=>setShaking(false), 500); setStatus('LOST');
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (level === 9) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const win = bet * 10; await updateDoc(doc(db,"users",user.id),{coins:Number(user.coins)+win});
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setStatus('WON'); showMsg(`${t('you_get')} ${win}`, 'success'); triggerConfetti();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else { setLevel(l => l + 1); }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const cashout = async () => {
Â  Â  Â  Â  Â  Â  Â  Â  if(status!=='PLAYING' || level===0) return;
Â  Â  Â  Â  Â  Â  Â  Â  const win = Math.floor(bet * (level * 1.5 + 1));
Â  Â  Â  Â  Â  Â  Â  Â  await updateDoc(doc(db,"users",user.id),{coins:Number(user.coins)+win});
Â  Â  Â  Â  Â  Â  Â  Â  setStatus('CASHED'); showMsg(`${t('you_get')} ${win}`, 'success'); triggerConfetti();
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  return React.createElement('div', { className: `fixed inset-0 bg-dark-950 z-50 flex flex-col h-full ${shaking?'animate-shake-hard':''} animate-slide-up` },
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex justify-between items-center p-4 bg-dark-900 shrink-0" },Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('button',{onClick:back,className:"text-slate-400 btn-press"},React.createElement(ArrowIcon)),Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('span',{className:"font-bold text-green-500"},t('tower')),Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('span',{className:"text-xs bg-black px-2 py-1 rounded"},user.coins)
Â  Â  Â  Â  Â  Â  Â  Â  ),
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex-1 flex flex-col-reverse p-6 gap-3 overflow-y-auto items-center justify-center relative" },Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  status==='LOST' && React.createElement('div',{className:"absolute inset-0 bg-red-500/10 pointer-events-none z-0"}),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Array(10).fill(0).map((_, rowIdx) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const isCurrent = rowIdx === level;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return React.createElement('div', { key: rowIdx, className: `flex gap-4 w-full justify-center transition-all z-10 ${isCurrent ? 'scale-110 opacity-100' : 'opacity-60'}` },Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Array(3).fill(0).map((_, colIdx) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let content = "?"; let bg = "bg-dark-800 border-white/10"; let flipped = false;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const pick = userPicks.find(p => p.r === rowIdx && p.c === colIdx);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (pick) { flipped = true; if(gameBoard[rowIdx] === colIdx) { content = "ðŸ’£"; bg = "bg-red-600 border-red-500"; } else { content = "ðŸ’Ž"; bg = "bg-green-600 border-green-500 shadow-[0_0_20px_#00ff00]"; } }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (status !== 'PLAYING' && status !== 'IDLE') { flipped = true; if(gameBoard[rowIdx] === colIdx) { content = "ðŸ’£"; if(!pick) bg = "bg-dark-800 border-red-500/50 opacity-80"; } else { content = "ðŸ’Ž"; if(!pick) bg = "bg-dark-800 border-green-500/50 opacity-50"; } }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return React.createElement('div', { className: "w-20 h-20 perspective-1000 cursor-pointer", onClick: () => handleStep(rowIdx, colIdx) },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: `relative w-full h-full text-3xl font-bold transition-all duration-500 transform-style-3d ${flipped ? 'rotate-y-180' : ''}` },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: `absolute w-full h-full backface-hidden flex items-center justify-center rounded-xl border bg-dark-800 border-white/10 hover:border-gold-500 shadow-lg` }, "?"),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: `absolute w-full h-full backface-hidden rotate-y-180 flex items-center justify-center rounded-xl border ${bg}` }, content)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â  Â  Â  ),
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "p-4 bg-dark-900 flex gap-4 pb-8" },Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  status === 'PLAYING' && level > 0 ? React.createElement(Button, { full: true, variant: "green", onClick: cashout }, t('withdraw') + ` (${Math.floor(bet*(level*1.5+1))})`)Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  : (status === 'PLAYING' ? React.createElement('div',{className:"text-center w-full text-gold-500 animate-pulse"}, "...") : React.createElement(Button, { full: true, onClick: startGame }, t('play')))
Â  Â  Â  Â  Â  Â  Â  Â  ),
Â  Â  Â  Â  Â  Â  Â  Â  status === 'CASHED' && React.createElement('div',{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/80 z-50 animate-pop backdrop-blur-sm"}, React.createElement('h1',{className:"text-6xl mb-4"},"ðŸŽ‰"), React.createElement('h2',{className:"text-3xl text-green-500 font-bold"}, t('you_get')), React.createElement('button',{onClick:()=>setStatus('IDLE'), className:"mt-8 bg-white text-black px-6 py-2 rounded-full font-bold"}, "OK"))
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- TASKS ---
Â  Â  Â  Â  function TasksScreen({ user, showMsg, t }) {
Â  Â  Â  Â  Â  Â  const [tasks, setTasks] = useState([]);
Â  Â  Â  Â  Â  Â  useEffect(() => { if(db) getDocs(collection(db, "tasks")).then(s => setTasks(s.docs.map(d=>({id:d.id, ...d.data()})))); }, []);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const handleTask = (task) => {Â 
Â  Â  Â  Â  Â  Â  Â  Â  window.open(task.url, '_blank');Â 
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(async () => {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(!db) return;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const comp = user.completedTasks || [];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(!comp.includes(task.id)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await updateDoc(doc(db,"users",user.id), {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  coins: Number(user.coins) + Number(task.reward),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  completedTasks: [...comp, task.id]
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMsg(t('success'));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }, 5000);Â 
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const comp = user.completedTasks || [];
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  return React.createElement('div', { className: "space-y-4 animate-slide-up" },
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('h2', { className: "text-gold-500 font-bold text-lg" }, t('tasks')),
Â  Â  Â  Â  Â  Â  Â  Â  tasks.length === 0 ? React.createElement('div', {className: "text-center text-gray-500 mt-10"}, t('no_tasks')) :
Â  Â  Â  Â  Â  Â  Â  Â  tasks.map(task => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const isDone = comp.includes(task.id);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return React.createElement('div', { key: task.id, className: `bg-dark-800 border p-4 rounded-xl flex justify-between items-center ${isDone?'border-white/5 opacity-50':'border-gold-500/30'}` },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex items-center gap-3" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', {},
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "font-bold text-sm" }, task.title),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "text-xs text-gold-500" }, `+${task.reward} C`)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isDone ?Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('span', { className: "text-green-500 text-xs font-bold flex items-center gap-1" }, React.createElement(Check, {size:14}), t('done')) :
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('button', { onClick: ()=>handleTask(task), className: "bg-gold-500 text-black px-4 py-2 rounded-lg text-xs font-bold btn-press" }, t('execute'))
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- WALLET & DEPOSIT ---
Â  Â  Â  Â  function WalletScreen({ user, showMsg, t, isRTL, navTo }) {
Â  Â  Â  Â  Â  Â  return React.createElement('div', { className: "space-y-6 animate-slide-up" },
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "bg-gradient-to-br from-dark-900 to-black p-6 rounded-2xl border border-white/10 text-center shadow-lg" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "text-xs text-slate-500 uppercase tracking-widest" }, t('balance')),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "text-5xl font-mono font-bold text-gold-500 gold-glow" }, `$${Number(user.balance).toFixed(2)}`)
Â  Â  Â  Â  Â  Â  Â  Â  ),
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "grid grid-cols-2 gap-4" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(Button, { variant: "green", onClick: ()=>navTo('deposit') }, t('deposit')),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(Button, { variant: "dark", onClick: ()=>navTo('withdraw') }, t('withdraw'))
Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  }

Â  Â  Â  Â  function DepositScreen({ user, showMsg, t, settings, back }) {
Â  Â  Â  Â  Â  Â  const [tab, setTab] = useState('offers'); const [modal, setModal] = useState(null); const [proof, setProof] = useState(''); const [amount, setAmount] = useState('');
Â  Â  Â  Â  Â  Â  const submit = async () => {
Â  Â  Â  Â  Â  Â  Â  Â  if(!proof) return showMsg(t('inputs_err'), 'error');
Â  Â  Â  Â  Â  Â  Â  Â  const finalAmount = modal.offer ? modal.offer.price : amount;
Â  Â  Â  Â  Â  Â  Â  Â  if(!finalAmount) return showMsg(t('inputs_err'), 'error');
Â  Â  Â  Â  Â  Â  Â  Â  await addDoc(collection(db, "deposits"), { userId: user.id, username: user.username, amount: finalAmount, method: modal.method, proof, status: 'pending', date: new Date().toISOString() });
Â  Â  Â  Â  Â  Â  Â  Â  showMsg(t('success'), "success"); setModal(null);
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  const handleFile = async (e) => { const file = e.target.files[0]; if(file) setProof(await compressImage(file)); };
Â  Â  Â  Â  Â  Â  return React.createElement('div', { className: "space-y-6 animate-slide-up" },
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex justify-between items-center" }, React.createElement('h2', { className: "text-gold-500 font-bold text-xl" }, t('deposit')), React.createElement('button', { onClick: back, className: "bg-white/10 p-2 rounded-full" }, React.createElement(X, { size: 20 }))),
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex gap-2" }, React.createElement('button',{onClick:()=>setTab('offers'), className:`flex-1 py-3 rounded-xl font-bold transition-all ${tab==='offers'?'bg-gold-500 text-black':'bg-dark-800'}`},t('offers')), React.createElement('button',{onClick:()=>setTab('calc'), className:`flex-1 py-3 rounded-xl font-bold transition-all ${tab==='calc'?'bg-gold-500 text-black':'bg-dark-800'}`},"1$ = 1000C")),
Â  Â  Â  Â  Â  Â  Â  Â  tab === 'offers' && React.createElement('div', { className: "grid gap-4" }, (settings.offers || []).map((off, i) => React.createElement('div', { key: i, className: "bg-gradient-to-br from-dark-800 to-black border border-gold-500/30 p-4 rounded-2xl relative overflow-hidden" }, React.createElement('div', { className: "absolute top-0 right-0 bg-red-600 text-white text-xs px-2 py-1 rounded-bl-xl font-bold" }, "HOT"), React.createElement('h3', { className: "text-lg font-bold text-white" }, off.title), React.createElement('p', { className: "text-gray-400 text-sm mb-3" }, off.desc), React.createElement('div', { className: "flex justify-between items-center" }, React.createElement('div', { className: "text-gold-500 font-mono text-xl" }, `$${off.price}`), React.createElement('button', { onClick: ()=>setModal({type:'offer', offer:off}), className: "bg-gold-500 text-black px-4 py-2 rounded-lg font-bold btn-press" }, "Buy"))))),
Â  Â  Â  Â  Â  Â  Â  Â  tab === 'calc' && React.createElement('div',{className:"bg-dark-800 p-6 rounded-2xl space-y-4"}, React.createElement(Input,{placeholder:"Amount $", id:"calc_amt", value:amount, onChange:e=>setAmount(e.target.value)}), React.createElement('div', { className: "text-center text-gray-400" }, "=", React.createElement('span', { className: "text-gold-500 font-bold ml-2" }, amount ? amount * 1000 : 0), " Coins"), React.createElement(Button,{full:true, onClick:()=>{if(amount) setModal({type:'calc', amount});}}, t('deposit'))),
Â  Â  Â  Â  Â  Â  Â  Â  modal && React.createElement('div', { className: "fixed inset-0 bg-black/90 z-[60] flex items-center justify-center p-6" }, React.createElement('div', { className: "bg-dark-900 w-full max-w-sm rounded-2xl p-6 border border-gold-500/30 space-y-4 animate-pop" }, React.createElement('div', { className: "flex justify-between" }, React.createElement('h3', { className: "font-bold text-lg" }, t('payment_info')), React.createElement('button', { onClick: ()=>setModal(null) }, React.createElement(X))), !modal.method ? React.createElement('div', { className: "space-y-2" }, ['CashPlus', 'PayPal', 'Attijari', 'Binance'].map(m => React.createElement('button', { key: m, onClick: ()=>setModal({...modal, method: m}), className: "w-full p-4 bg-dark-800 rounded-xl border border-white/5 hover:border-gold-500 text-left font-bold" }, m))) : React.createElement('div', { className: "space-y-4" }, React.createElement('div', { className: "bg-black/50 p-4 rounded-xl text-sm text-gray-300 font-mono break-all" }, React.createElement('div', { className: "text-gold-500 mb-1" }, "Send To:"), settings.payments?.[modal.method] || "Admin Contact Required"), React.createElement('label', { className: "block w-full p-4 border-2 border-dashed border-gray-600 rounded-xl text-center cursor-pointer hover:border-gold-500" }, React.createElement('input', { type: "file", accept: "image/*", className: "hidden", onChange: handleFile }), React.createElement(Upload, { className: "mx-auto mb-2" }), proof ? "Image Selected" : t('upload_proof')), React.createElement(Button, { full: true, onClick: submit }, t('confirm')))))
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  }

Â  Â  Â  Â  function WithdrawScreen({ user, showMsg, t, back }) {
Â  Â  Â  Â  Â  Â  const [method, setMethod] = useState(''); const [amt, setAmt] = useState(''); const [info, setInfo] = useState({});
Â  Â  Â  Â  Â  Â  const submit = async () => {
Â  Â  Â  Â  Â  Â  Â  Â  if(!amt || !method) return showMsg(t('inputs_err'), 'error');
Â  Â  Â  Â  Â  Â  Â  Â  if(Number(user.balance) < Number(amt)) return showMsg(t('no_balance'), 'error');
Â  Â  Â  Â  Â  Â  Â  Â  let details = "";
Â  Â  Â  Â  Â  Â  Â  Â  if(method === 'Mobile') details = `${info.net} - ${info.ph}`;
Â  Â  Â  Â  Â  Â  Â  Â  else details = info.val;
Â  Â  Â  Â  Â  Â  Â  Â  await addDoc(collection(db, "withdrawals"), { userId: user.id, username: user.username, amount: amt, method, details, status: 'pending', date: new Date().toISOString() });
Â  Â  Â  Â  Â  Â  Â  Â  await updateDoc(doc(db,"users",user.id),{balance:Number(user.balance)-Number(amt)});
Â  Â  Â  Â  Â  Â  Â  Â  showMsg(t('success')); back();
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  return React.createElement('div', { className: "space-y-6 animate-pop" },
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex justify-between" }, React.createElement('h2', { className: "text-gold-500 font-bold" }, t('withdraw')), React.createElement('button', { onClick: back }, React.createElement(X))),
Â  Â  Â  Â  Â  Â  Â  Â  !method ? ['PayPal', '1XBET', 'Mobile', 'Cash Plus', 'Attijari'].map(m => React.createElement('button', { key: m, onClick: ()=>setMethod(m), className: "w-full p-4 bg-dark-800 rounded-xl border border-white/5 mb-2 text-left font-bold" }, m))
Â  Â  Â  Â  Â  Â  Â  Â  : React.createElement('div', { className: "space-y-4" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('h3', { className: "text-lg font-bold" }, method),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(Input, { type: "number", placeholder: t('amount'), value: amt, onChange: e=>setAmt(e.target.value) }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method === 'Mobile' ? React.createElement(React.Fragment, null,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('select', { className: "w-full bg-dark-900 p-4 rounded-xl border border-white/10", onChange: e=>setInfo({...info, net:e.target.value}) }, React.createElement('option',{},t('network')), React.createElement('option',{value:"IAM"},"IAM"), React.createElement('option',{value:"Orange"},"Orange"), React.createElement('option',{value:"Inwi"},"Inwi")),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(Input, { placeholder: t('phone_num'), onChange: e=>setInfo({...info, ph:e.target.value}) })
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ) : React.createElement(Input, { placeholder: method==='PayPal'?'Email':t('account_id'), onChange: e=>setInfo({...info, val:e.target.value}) }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(Button, { full: true, onClick: submit }, t('confirm'))
Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- HISTORY & SETTINGS ---
Â  Â  Â  Â  function HistoryScreen({ user, t }) { return React.createElement('div', { className: "text-center text-gray-500 mt-10" }, "No History"); }
Â  Â  Â  Â  function InfoPage({ title, content }) { return React.createElement('div', { className: "p-4" }, React.createElement('h1', { className: "text-xl font-bold mb-4" }, title), content); }

Â  Â  Â  Â  function SettingsScreen({ user, showMsg, t }) {
Â  Â  Â  Â  Â  Â  const [pass, setPass] = useState({ old: '', new: '' });
Â  Â  Â  Â  Â  Â  const changePass = async () => { if(pass.old !== user.password) return showMsg("Old password incorrect", "error"); await updateDoc(doc(db,"users",user.id), { password: pass.new }); showMsg(t('success')); setPass({old:'', new:''}); };
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  return React.createElement('div', { className: "space-y-6 animate-slide-up" },
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('h2', { className: "text-gold-500 font-bold text-lg" }, t('settings')),
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Personal Info Read-Only
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "space-y-4" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('h3', { className: "font-bold text-white text-sm border-b border-white/10 pb-2" }, t('personal_info')),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "bg-dark-800 p-4 rounded-xl border border-white/5 space-y-3" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex justify-between" }, React.createElement('span', { className: "text-gray-500 text-xs" }, t('name')), React.createElement('span', { className: "font-bold" }, user.fullName)),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex justify-between" }, React.createElement('span', { className: "text-gray-500 text-xs" }, t('phone')), React.createElement('span', { className: "font-bold" }, user.phone)),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex justify-between" }, React.createElement('span', { className: "text-gray-500 text-xs" }, t('user')), React.createElement('span', { className: "font-bold" }, user.username)),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex justify-between" }, React.createElement('span', { className: "text-gray-500 text-xs" }, "Member ID"), React.createElement('span', { className: "font-mono text-gold-500" }, user.memberId))
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  Â  Â  ),

Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "h-px bg-white/10" }),
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('h3', { className: "font-bold text-sm" }, t('change_pass')),
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "space-y-3" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(Input, { type: "password", placeholder: t('old_pass'), value: pass.old, onChange: e=>setPass({...pass, old:e.target.value}) }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(Input, { type: "password", placeholder: t('new_pass'), value: pass.new, onChange: e=>setPass({...pass, new:e.target.value}) }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement(Button, { full: true, onClick: changePass, variant: "dark" }, t('confirm'))
Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  }

Â  Â  Â  Â  function AdminPanel({ user, logout, db }) {
Â  Â  Â  Â  Â  Â  const [tab, setTab] = useState('deposits');
Â  Â  Â  Â  Â  Â  const [data, setData] = useState({ deposits: [], withdrawals: [], resets: [] });
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  useEffect(() => {Â 
Â  Â  Â  Â  Â  Â  Â  Â  const q1 = onSnapshot(collection(db, "deposits"), s => setData(prev => ({ ...prev, deposits: s.docs.map(d=>({id:d.id, ...d.data()})) })));
Â  Â  Â  Â  Â  Â  Â  Â  const q2 = onSnapshot(collection(db, "withdrawals"), s => setData(prev => ({ ...prev, withdrawals: s.docs.map(d=>({id:d.id, ...d.data()})) })));
Â  Â  Â  Â  Â  Â  Â  Â  const q3 = onSnapshot(collection(db, "password_resets"), s => setData(prev => ({ ...prev, resets: s.docs.map(d=>({id:d.id, ...d.data()})) })));
Â  Â  Â  Â  Â  Â  Â  Â  return () => { q1(); q2(); q3(); };
Â  Â  Â  Â  Â  Â  }, []);

Â  Â  Â  Â  Â  Â  const updateStatus = (col, id, status, amount, userId) => {
Â  Â  Â  Â  Â  Â  Â  Â  updateDoc(doc(db, col, id), { status });
Â  Â  Â  Â  Â  Â  Â  Â  if(status === 'approved' && col === 'deposits') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  getDoc(doc(db, "users", userId)).then(u => { updateDoc(doc(db, "users", userId), { coins: Number(u.data().coins) + Number(amount)*1000 }); });
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  return React.createElement('div', { className: "min-h-screen bg-dark-950 p-4 space-y-4" },
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex justify-between items-center" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('h1', { className: "text-gold-500 font-bold" }, "ADMIN DASHBOARD"),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('button', { onClick: logout, className: "bg-red-900/20 text-red-500 px-4 py-1 rounded" }, "Exit")
Â  Â  Â  Â  Â  Â  Â  Â  ),
Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex gap-2 overflow-x-auto pb-2" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ['deposits', 'withdrawals', 'resets'].map(k => React.createElement('button', { key: k, onClick: ()=>setTab(k), className: `px-4 py-2 rounded-lg capitalize ${tab===k?'bg-gold-500 text-black':'bg-dark-800'}` }, k))
Â  Â  Â  Â  Â  Â  Â  Â  ),
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Content
Â  Â  Â  Â  Â  Â  Â  Â  (tab === 'deposits' || tab === 'withdrawals') && data[tab].map(d => React.createElement('div', { key: d.id, className: "bg-dark-800 p-4 rounded-xl border border-white/5 mb-2" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex justify-between mb-2" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('span', { className: "font-bold" }, d.username),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('span', { className: "text-gold-500" }, `$${d.amount}`)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  d.proof && React.createElement('img', { src: d.proof, className: "w-full h-32 object-cover rounded mt-2 border border-white/10" }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  d.details && React.createElement('div', { className: "text-sm text-gray-400 mt-1" }, d.details),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', { className: "flex gap-2 mt-2" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  d.status === 'pending' ? React.createElement(React.Fragment, null,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('button', { onClick: ()=>updateStatus(tab, d.id, 'approved', d.amount, d.userId), className: "flex-1 bg-green-600 py-1 rounded" }, "Approve"),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('button', { onClick: ()=>updateStatus(tab, d.id, 'rejected'), className: "flex-1 bg-red-600 py-1 rounded" }, "Reject")
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ) : React.createElement('span', { className: `text-xs uppercase font-bold ${d.status==='approved'?'text-green-500':'text-red-500'}` }, d.status)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  Â  Â  )),

Â  Â  Â  Â  Â  Â  Â  Â  tab === 'resets' && data.resets.map(r => React.createElement('div', { key: r.id, className: "bg-dark-800 p-4 rounded-xl flex justify-between items-center mb-2" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  React.createElement('div', {}, React.createElement('div', { className: "font-bold" }, r.username), React.createElement('div', { className: "text-xs text-gray-500" }, new Date(r.date).toLocaleDateString())),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  r.status === 'pending' ? React.createElement('button', { onClick: ()=>updateStatus('password_resets', r.id, 'processed'), className: "bg-blue-600 px-3 py-1 rounded text-xs" }, "Mark Done") : React.createElement('span', { className: "text-green-500 text-xs" }, "Done")
Â  Â  Â  Â  Â  Â  Â  Â  ))
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  }

Â  Â  Â  Â  const root = createRoot(document.getElementById('root'));
Â  Â  Â  Â  root.render(React.createElement(App));
Â  Â  </script>
</body>
</html> 
