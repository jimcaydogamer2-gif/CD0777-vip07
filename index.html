<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CD0777 Royal Club - Pro</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        gold: { 100: '#FFF9C4', 300: '#FDD835', 400: '#FFD700', 500: '#FFC107', 600: '#FFB300', 700: '#FFA000', 800: '#C0A000', 900: '#3d2e07' },
                        dark: { 950: '#020617', 900: '#0f172a', 800: '#1e293b' }
                    },
                    fontFamily: {
                        cairo: ['Cairo', 'sans-serif'],
                        mono: ['Share Tech Mono', 'monospace'],
                        oswald: ['Oswald', 'sans-serif']
                    },
                    animation: {
                        'pop': 'pop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards',
                        'shake': 'shake 0.4s ease-in-out',
                        'spin-slow': 'spin 3s linear infinite',
                        'fade-in': 'fadeIn 0.5s ease-out forwards',
                        'pulse-glow': 'pulseGlow 2s infinite'
                    },
                    keyframes: {
                        pop: { '0%': { transform: 'scale(0.9)', opacity: '0' }, '100%': { transform: 'scale(1)', opacity: '1' } },
                        shake: { '0%, 100%': { transform: 'translateX(0)' }, '25%': { transform: 'translateX(-5px)' }, '75%': { transform: 'translateX(5px)' } },
                        fadeIn: { '0%': { opacity: '0' }, '100%': { opacity: '1' } },
                        pulseGlow: { '0%, 100%': { boxShadow: '0 0 5px #FFD700' }, '50%': { boxShadow: '0 0 20px #FFD700' } }
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&family=Oswald:wght@500&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        body { background-color: #020617; color: #fff; overflow: hidden; touch-action: manipulation; }
        .glass-panel { background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(12px); border-top: 1px solid rgba(255, 255, 255, 0.1); }
        .gold-glow { text-shadow: 0 0 15px rgba(255, 215, 0, 0.6); }
        .luxury-bg { background-image: radial-gradient(circle at center, #1e293b 0%, #000 100%); }
        input, select, button { outline: none; -webkit-tap-highlight-color: transparent; }
        ::-webkit-scrollbar { width: 0px; }
        
        /* Range Input */
        input[type=range] { -webkit-appearance: none; width: 100%; background: transparent; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 24px; width: 24px; border-radius: 50%; background: #FFD700; cursor: pointer; margin-top: -10px; box-shadow: 0 0 10px #FFD700; border: 2px solid white; }
        input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 4px; cursor: pointer; background: #334155; border-radius: 2px; }

        .btn-press:active { transform: scale(0.95); transition: transform 0.1s; }
        .perspective-1000 { perspective: 1000px; }
        .rotate-y-180 { transform: rotateY(180deg); }
        .backface-hidden { backface-visibility: hidden; }
        .preserve-3d { transform-style: preserve-3d; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="importmap">
        {
            "imports": {
                "react": "https://esm.sh/react@18.2.0",
                "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
                "lucide-react": "https://esm.sh/lucide-react@0.294.0",
                "firebase/app": "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js",
                "firebase/firestore": "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js"
            }
        }
    </script>

    <script type="module">
        import React, { useState, useEffect, useRef } from 'react';
        import { createRoot } from 'react-dom/client';
        import { User, Gamepad2, LogOut, Send, CheckCircle, XCircle, ChevronRight, ChevronLeft, Lock, Gem, Home, CreditCard, Wallet, ShieldCheck, Trophy, Instagram, Facebook, ExternalLink, Plus, Trash2, Smartphone, Zap, Check, Dices, RefreshCw, Menu, X, AlertTriangle, Settings, History, Globe, FileText, LifeBuoy, ArrowLeftRight, Bomb, ArrowUp, HelpCircle, Flame, Percent, DollarSign, Upload, Disc } from 'lucide-react';
        import { initializeApp } from 'firebase/app';
        import { getFirestore, collection, addDoc, updateDoc, doc, onSnapshot, query, where, getDocs, orderBy, setDoc, getDoc } from 'firebase/firestore';

        // --- FIREBASE CONFIG ---
        const firebaseConfig = {
            apiKey: "AIzaSyDJ5B7MncMfyjwb0ZnZ8p3d0bsoQAFqZQY",
            authDomain: "cd0777-casino.firebaseapp.com",
            projectId: "cd0777-casino",
            storageBucket: "cd0777-casino.firebasestorage.app",
            messagingSenderId: "320546250152",
            appId: "1:320546250152:web:730f6e581267b9b315919d"
        };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // --- CONSTANTS ---
        const COUNTRIES = [
            { code: 'MA', name: 'Morocco', dial: '+212', flag: 'ðŸ‡²ðŸ‡¦' },
            { code: 'DZ', name: 'Algeria', dial: '+213', flag: 'ðŸ‡©ðŸ‡¿' },
            { code: 'EG', name: 'Egypt', dial: '+20', flag: 'ðŸ‡ªðŸ‡¬' },
            { code: 'SA', name: 'Saudi Arabia', dial: '+966', flag: 'ðŸ‡¸ðŸ‡¦' },
            { code: 'AE', name: 'UAE', dial: '+971', flag: 'ðŸ‡¦ðŸ‡ª' },
            { code: 'KW', name: 'Kuwait', dial: '+965', flag: 'ðŸ‡°ðŸ‡¼' },
            { code: 'QA', name: 'Qatar', dial: '+974', flag: 'ðŸ‡¶ðŸ‡¦' }
        ];

        const TEXTS = {
            ar: {
                welcome: "Ù…Ø±Ø­Ø¨Ø§Ù‹", login: "Ø¯Ø®ÙˆÙ„", register: "Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯",
                home: "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©", casino: "ÙƒØ§Ø²ÙŠÙ†Ùˆ", wallet: "Ø§Ù„Ù…Ø­ÙØ¸Ø©", deposit: "Ø¥ÙŠØ¯Ø§Ø¹", withdraw: "Ø³Ø­Ø¨",
                dice: "Ø§Ù„Ù†Ø±Ø¯", plinko: "Ø¥Ø³Ù‚Ø§Ø·", mines: "Ø§Ù„Ø£Ù„ØºØ§Ù…", wheel: "Ø§Ù„Ø¹Ø¬Ù„Ø©",
                play: "Ù„Ø¹Ø¨", confirm: "ØªØ£ÙƒÙŠØ¯", cancel: "Ø¥Ù„ØºØ§Ø¡", success: "Ù†Ø¬Ø§Ø­", error: "Ø®Ø·Ø£",
                no_balance: "Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙŠ", safe_limit: "Ø­Ø¯ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¢Ù…Ù† 10 Ø¹Ù…Ù„Ø§Øª",
                payment_info: "Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯ÙØ¹", upload_proof: "ØµÙˆØ±Ø© Ø§Ù„ÙˆØµÙ„", offers: "Ø§Ù„Ø¹Ø±ÙˆØ¶",
                mobile_recharge: "ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ù‡Ø§ØªÙ", bank: "Ø§Ù„Ø¨Ù†Ùƒ", cash_plus: "ÙƒØ§Ø´ Ø¨Ù„Ø³",
                network: "Ø§Ù„Ø´Ø¨ÙƒØ©", phone_num: "Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ", account_id: "Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨ / RIB",
                you_won: "Ø±Ø¨Ø­Øª", you_lost: "Ø®Ø³Ø±Øª", multiplier: "Ø§Ù„Ù…Ø¶Ø§Ø¹Ù"
            }
        };

        // --- UTILS ---
        // Image Compressor to avoid Firestore Limits
        const compressImage = (file) => new Promise((resolve) => {
            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = (event) => {
                const img = new Image();
                img.src = event.target.result;
                img.onload = () => {
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    const scale = 600 / Math.max(img.width, img.height); 
                    canvas.width = img.width * scale;
                    canvas.height = img.height * scale;
                    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                    resolve(canvas.toDataURL('image/jpeg', 0.6));
                }
            }
        });

        // --- APP COMPONENT ---
        export default function App() {
            const [splash, setSplash] = useState(true);
            const [user, setUser] = useState(null);
            const [view, setView] = useState('auth'); 
            const [notify, setNotify] = useState(null);
            const [menuOpen, setMenuOpen] = useState(false);
            const [settings, setSettings] = useState({});

            const t = (k) => TEXTS.ar[k] || k;

            useEffect(() => { setTimeout(() => setSplash(false), 2500); }, []);
            useEffect(() => { if(db) onSnapshot(doc(db, "settings", "global"), (s) => s.exists() && setSettings(s.data())); }, []);
            
            useEffect(() => {
                const uid = localStorage.getItem('cd0777_uid');
                if (uid && db) {
                    const unsub = onSnapshot(doc(db, "users", uid), (s) => {
                        if (s.exists()) {
                            setUser({ id: s.id, ...s.data() });
                            if(view === 'auth') setView(s.data().role==='admin'?'admin':'home');
                        } else { setUser(null); setView('auth'); }
                    });
                    return () => unsub();
                }
            }, []);

            const showMsg = (msg, type='success') => { setNotify({msg, type}); setTimeout(()=>setNotify(null), 3000); };
            const navTo = (v) => { setView(v); setMenuOpen(false); };
            
            if (splash) return React.createElement(SplashScreen);
            if (!user && view === 'auth') return React.createElement(AuthScreen, { setUser, setView, showMsg, t });
            if (user?.role === 'admin' && view === 'admin') return React.createElement(AdminPanel, { user, logout: ()=>{localStorage.clear(); window.location.reload()}, db });

            // Games
            if (view === 'game-dice') return React.createElement(DiceGame, { user, back: ()=>navTo('casino'), showMsg, t });
            if (view === 'game-plinko') return React.createElement(PlinkoGame, { user, back: ()=>navTo('casino'), showMsg, t });
            if (view === 'game-mines') return React.createElement(MinesGame, { user, back: ()=>navTo('casino'), showMsg, t });
            if (view === 'game-wheel') return React.createElement(WheelGame, { user, back: ()=>navTo('casino'), showMsg, t });

            return React.createElement('div', { className: "h-screen flex flex-col bg-dark-950 text-white relative selection:bg-gold-500 selection:text-black", dir: "rtl" },
                notify && React.createElement('div', { className: `fixed top-6 left-1/2 -translate-x-1/2 z-[100] px-6 py-3 rounded-xl shadow-2xl border flex items-center gap-2 animate-pop glass-panel ${notify.type==='error'?'bg-red-950/90 border-red-500':'bg-green-950/90 border-green-500'}` }, 
                    notify.type==='success'?React.createElement(CheckCircle,{size:20}):React.createElement(XCircle,{size:20}), React.createElement('span',{className:"font-bold"},notify.msg)
                ),
                
                React.createElement(Header, { user, toggleMenu: ()=>setMenuOpen(true) }),
                menuOpen && React.createElement(Sidebar, { user, close: ()=>setMenuOpen(false), navTo, t, settings }),
                
                React.createElement('main', { className: "flex-1 overflow-y-auto p-5 pb-28 scrollbar-hide" },
                    view === 'home' && React.createElement(HomeScreen, { user, navTo, t }),
                    view === 'casino' && React.createElement(CasinoScreen, { navTo, t }),
                    view === 'wallet' && React.createElement(WalletScreen, { user, showMsg, t, navTo }),
                    view === 'deposit' && React.createElement(DepositScreen, { user, showMsg, t, settings, back: ()=>navTo('wallet') }),
                    view === 'withdraw' && React.createElement(WithdrawScreen, { user, showMsg, t, back: ()=>navTo('wallet') }),
                    view === 'settings' && React.createElement(SettingsScreen, { user, showMsg, t })
                ),

                React.createElement('nav', { className: "fixed bottom-4 left-4 right-4 h-16 glass-panel rounded-2xl z-40 flex justify-around items-center shadow-2xl border border-white/10 backdrop-blur-md" },
                    React.createElement(NavBtn, { icon: Home, label: t('home'), active: view==='home', onClick:()=>navTo('home') }),
                    React.createElement(NavBtn, { icon: Dices, label: t('casino'), active: view==='casino', onClick:()=>navTo('casino') }),
                    React.createElement(NavBtn, { icon: Wallet, label: t('wallet'), active: view==='wallet', onClick:()=>navTo('wallet') })
                )
            );
        }

        // --- SUB COMPONENTS ---
        const Button = ({ children, onClick, disabled, variant='gold', full, className='', icon: Icon }) => {
            const styles = {
                gold: 'bg-gradient-to-b from-[#FFD700] to-[#B8860B] text-black shadow-lg border border-[#FFD700]',
                green: 'bg-gradient-to-b from-emerald-500 to-emerald-700 text-white border border-emerald-500',
                red: 'bg-gradient-to-b from-red-500 to-red-700 text-white border border-red-500',
                dark: 'bg-dark-800 text-gold-500 border border-gold-500/30'
            };
            return React.createElement('button', { onClick, disabled, className: `relative font-bold py-3.5 px-6 rounded-xl transition-all flex items-center justify-center gap-2 btn-press disabled:opacity-50 disabled:grayscale ${styles[variant]} ${full?'w-full':''} ${className}` }, 
                Icon && React.createElement(Icon, { size: 18 }), children
            );
        };

        const Input = (props) => React.createElement('div', { className: "relative w-full" },
            props.icon && React.createElement(props.icon, { size: 18, className: "absolute top-1/2 -translate-y-1/2 left-4 text-gray-500" }),
            React.createElement('input', { ...props, className: `w-full bg-dark-900 border border-white/10 p-4 ${props.icon?'pl-12':''} rounded-xl text-white outline-none focus:border-gold-500 transition-all placeholder:text-gray-600 shadow-inner ${props.className}` })
        );

        function SplashScreen() {
            return React.createElement('div', { className: "fixed inset-0 bg-black z-[100] flex flex-col items-center justify-center" },
                React.createElement('div', { className: "relative w-40 h-40 flex items-center justify-center animate-pop" },
                    React.createElement('div', { className: "absolute inset-0 border-4 border-gold-500 rotate-45 rounded-xl shadow-[0_0_50px_#FFD700]" }),
                    React.createElement('h1', { className: "text-7xl font-black text-transparent bg-clip-text bg-gradient-to-tr from-gold-300 to-gold-600 font-oswald tracking-tighter" }, "CD")
                )
            );
        }

        function Header({ user, toggleMenu }) {
            return React.createElement('div', { className: "sticky top-0 z-40 bg-dark-950/80 backdrop-blur-md border-b border-white/5 px-5 py-4 flex justify-between items-center" },
                React.createElement('div', { className: "flex items-center gap-3" },
                    React.createElement('button', { onClick: toggleMenu, className: "p-2 bg-dark-900 rounded-xl text-gold-500 border border-white/5 btn-press" }, React.createElement(Menu, { size: 24 })),
                    React.createElement('div', { className: "w-9 h-9 rounded-xl bg-gradient-to-tr from-gold-400 to-gold-600 flex items-center justify-center font-black text-black text-sm shadow-lg" }, "CD")
                ),
                React.createElement('div', { className: "bg-dark-900 border border-white/10 px-4 py-1.5 rounded-full flex items-center gap-2" }, React.createElement(Gem, { size: 16, className: "text-gold-500" }), React.createElement('span', { className: "text-gold-500 font-mono font-bold text-sm" }, user.coins.toLocaleString()))
            );
        }

        function Sidebar({ user, close, navTo, logout }) {
            return React.createElement('div', { className: "fixed inset-0 z-50 flex" },
                React.createElement('div', { className: "absolute inset-0 bg-black/80 backdrop-blur-md", onClick: close }),
                React.createElement('div', { className: "relative w-72 bg-dark-900 border-l border-gold-500/20 h-full p-6 shadow-2xl flex flex-col" },
                    React.createElement('div', { className: "flex justify-between mb-8" }, React.createElement('h2',{className:"text-gold-500 font-bold text-2xl"}, "Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©"), React.createElement('button',{onClick:close},React.createElement(X))),
                    React.createElement('nav', { className: "space-y-2 flex-1" },
                        React.createElement(SidebarBtn, { icon: Home, label: "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©", onClick:()=>navTo('home') }),
                        React.createElement(SidebarBtn, { icon: Dices, label: "Ø§Ù„ÙƒØ§Ø²ÙŠÙ†Ùˆ", onClick:()=>navTo('casino') }),
                        React.createElement(SidebarBtn, { icon: Wallet, label: "Ø§Ù„Ù…Ø­ÙØ¸Ø©", onClick:()=>navTo('wallet') }),
                        React.createElement(SidebarBtn, { icon: Settings, label: "Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª", onClick:()=>navTo('settings') }),
                    ),
                    React.createElement('button', { onClick:()=>window.location.reload(), className: "mt-auto w-full flex items-center justify-center gap-2 text-red-400 p-4 bg-red-900/10 rounded-2xl font-bold" }, React.createElement(LogOut), "Ø®Ø±ÙˆØ¬")
                )
            );
        }
        const SidebarBtn = ({ icon: Icon, label, onClick }) => React.createElement('button', { onClick, className: "w-full flex items-center gap-4 p-3.5 rounded-xl text-gray-300 hover:bg-white/5 btn-press" }, React.createElement(Icon, { size: 20 }), React.createElement('span', {}, label));
        const NavBtn = ({ icon: Icon, label, active, onClick }) => React.createElement('button', { onClick, className: `flex flex-col items-center gap-1 transition-all ${active?'text-gold-500 -translate-y-1 scale-110':'text-gray-500'}` }, React.createElement(Icon, { size: 24, strokeWidth: active?2.5:2 }), React.createElement('span', { className: "text-[9px] font-bold" }, label));

        function AuthScreen({ setUser, setView, showMsg, t }) {
            const [isReg, setIsReg] = useState(false); const [f, setF] = useState({ u:'', p:'', n:'', ph:'' });
            const submit = async () => {
                if(!f.u || !f.p) return showMsg(t('inputs_err'), 'error');
                if(f.u==='admin' && f.p==='admin123') { localStorage.setItem('cd0777_uid', 'admin'); setUser({role:'admin'}); setView('admin'); return; }
                try {
                    if(isReg) {
                        const sz = (await getDocs(collection(db, "users"))).size;
                        const nu = { username: f.u, password: f.p, fullName: f.n, phone: f.ph, memberId: `CD${1001+sz}`, role: 'user', status: 'active', coins: 100, balance: 0 };
                        const ref = await addDoc(collection(db, "users"), nu); localStorage.setItem('cd0777_uid', ref.id); setUser({id:ref.id, ...nu}); setView('home');
                    } else {
                        const q = query(collection(db, "users"), where("username", "==", f.u), where("password", "==", f.p)); const s = await getDocs(q);
                        if(s.empty) throw new Error('Error'); const d=s.docs[0]; localStorage.setItem('cd0777_uid', d.id); setUser({id:d.id, ...d.data()}); setView('home');
                    }
                } catch(e) { showMsg("Error", 'error'); }
            };
            return React.createElement('div', { className: "h-full flex flex-col items-center justify-center p-6 bg-dark-950 luxury-bg" },
                React.createElement('div', { className: "w-32 h-32 rounded-3xl bg-gradient-to-tr from-gold-400 to-gold-700 flex items-center justify-center text-6xl font-black text-black mb-8 shadow-2xl border-4 border-gold-300" }, "CD"),
                React.createElement('div', { className: "w-full max-w-sm space-y-4" },
                    React.createElement('h1', { className: "text-3xl font-bold text-center text-gold-500 mb-6 font-oswald" }, isReg ? t('register') : t('login')),
                    isReg && React.createElement(Input, { icon: User, placeholder: t('name'), onChange: e=>setF({...f,n:e.target.value}) }),
                    isReg && React.createElement(Input, { icon: Smartphone, placeholder: t('phone'), onChange: e=>setF({...f,ph:e.target.value}) }),
                    React.createElement(Input, { icon: User, placeholder: t('user'), onChange: e=>setF({...f,u:e.target.value}) }),
                    React.createElement(Input, { icon: Lock, type: "password", placeholder: t('pass'), onChange: e=>setF({...f,p:e.target.value}) }),
                    React.createElement(Button, { full: true, onClick: submit }, isReg?t('register'):t('login')),
                    React.createElement('button', { onClick: ()=>setIsReg(!isReg), className: "w-full text-center text-xs text-slate-500 mt-4" }, isReg?"Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ":"Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯")
                )
            );
        }

        // --- SCREENS ---
        function HomeScreen({ user, navTo, t }) {
            return React.createElement('div', { className: "space-y-6 animate-pop" },
                React.createElement('div', { className: "relative aspect-[1.58/1] rounded-2xl overflow-hidden shadow-2xl border border-white/10 hover:border-gold-500/40 transition-all transform hover:rotate-1" },
                    React.createElement('div', { className: "absolute inset-0 bg-gradient-to-br from-dark-900 to-black" }),
                    React.createElement('div', { className: "absolute inset-0 opacity-20", style:{backgroundImage:'radial-gradient(#C0A000 1px, transparent 1px)', backgroundSize:'20px 20px'} }),
                    React.createElement('div', { className: "relative z-10 h-full p-6 flex flex-col justify-between" },
                        React.createElement('div', { className: "flex justify-between items-start" },
                            React.createElement('div', { className: "flex items-center gap-2" }, React.createElement(ShieldCheck, { className: "text-gold-500", size: 26 }), React.createElement('h2', { className: "text-gold-500 font-oswald text-xl tracking-widest" }, "CD0777")),
                            React.createElement('div', { className: "px-3 py-1 rounded-full text-[9px] font-black tracking-wider border border-green-500 text-green-400" }, "ACTIVE")
                        ),
                        React.createElement('div', { className: "flex justify-between items-center" },
                            React.createElement('div', {}, React.createElement('p', { className: "text-gray-400 text-[8px] uppercase tracking-widest mb-1 font-bold" }, t('balance')), React.createElement('p', { className: "font-mono text-3xl text-white flex gap-1" }, React.createElement('span', { className: "text-gold-500" }, "$"), Number(user.balance).toFixed(2))),
                            React.createElement('div', { className: "text-right" }, React.createElement('p', { className: "text-[7px] text-gold-600 uppercase mb-1 font-bold" }, t('id')), React.createElement('p', { className: "font-mono text-lg text-white border-gold-500 px-2 border-r-2" }, user.memberId))
                        ),
                        React.createElement('div', { className: "flex justify-between items-end" }, React.createElement('div', {}, React.createElement('p', { className: "text-[7px] text-gold-600 uppercase mb-0.5 font-bold" }, t('name')), React.createElement('p', { className: "font-mono text-gray-200 text-sm tracking-widest uppercase" }, user.fullName)))
                    )
                ),
                React.createElement('button', { onClick: ()=>navTo('casino'), className: "w-full h-28 relative rounded-2xl overflow-hidden group active:scale-95 transition-all border border-white/5 hover:border-gold-500/40 shadow-xl" },
                    React.createElement('div', { className: "absolute inset-0 bg-gradient-to-r from-purple-900/80 to-indigo-900/80" }),
                    React.createElement('div', { className: "absolute inset-0 flex items-center justify-between p-6" },
                        React.createElement('div', {}, React.createElement('h3', { className: "text-2xl font-black italic text-white mb-1 drop-shadow-md" }, "PLAY & WIN"), React.createElement('p', { className: "text-xs text-purple-200 font-bold" }, t('play'))),
                        React.createElement(Gamepad2, { size: 50, className: "text-white/20" })
                    )
                )
            );
        }

        function CasinoScreen({ navTo, t }) {
            return React.createElement('div', { className: "space-y-4 animate-pop" },
                React.createElement('h2', { className: "text-gold-500 font-bold text-lg flex gap-2 items-center" }, React.createElement(Dices), t('casino')),
                React.createElement('div', { className: "grid grid-cols-2 gap-4" },
                    React.createElement(GameCard, { title:t('dice'), sub:t('dice_desc'), color:"blue", icon:Percent, onClick:()=>navTo('game-dice') }),
                    React.createElement(GameCard, { title:t('plinko'), sub:t('plinko_desc'), color:"purple", icon:Gem, onClick:()=>navTo('game-plinko') }),
                    React.createElement(GameCard, { title:t('mines'), sub:t('mines_desc'), color:"emerald", icon:Bomb, onClick:()=>navTo('game-mines') }),
                    React.createElement(GameCard, { title:t('wheel'), sub:"Spin Win", color:"orange", icon:Disc, onClick:()=>navTo('game-wheel') })
                )
            );
        }
        const GameCard = ({ title, sub, color, icon: Icon, onClick }) => React.createElement('button', { onClick, className: `relative h-32 rounded-2xl overflow-hidden border border-white/5 bg-dark-800 hover:border-${color}-500/50 transition-all group w-full text-right active:scale-95 shadow-lg` }, React.createElement('div', { className: `absolute inset-0 bg-gradient-to-br from-${color}-900/50 to-transparent` }), React.createElement('div', { className: `absolute top-3 left-3 text-${color}-500/20 group-hover:text-${color}-500/40 transition-colors` }, React.createElement(Icon, { size: 60 })), React.createElement('div', { className: "absolute bottom-4 right-4 z-10" }, React.createElement('h3', { className: "text-xl font-black text-white italic" }, title), React.createElement('p', { className: `text-[10px] text-${color}-300 font-bold uppercase` }, sub)));

        // --- GAME 1: DICE ---
        function DiceGame({ user, back, showMsg, t }) {
            const [bet, setBet] = useState(100); const [target, setTarget] = useState(50); const [result, setResult] = useState(null); const [rolling, setRolling] = useState(false);
            const roll = async () => {
                if(Number(user.coins)<bet) return showMsg(t('no_balance'),'error');
                setRolling(true); await updateDoc(doc(db,"users",user.id),{coins:Number(user.coins)-bet});
                setTimeout(async () => {
                    const r = Math.floor(Math.random()*100); setResult(r);
                    if(r < target) {
                        const win = Math.floor(bet * (98/target));
                        await updateDoc(doc(db,"users",user.id),{coins:Number(user.coins)+win});
                        showMsg(`+${win}`, 'success');
                    }
                    setRolling(false);
                }, 500);
            };
            return React.createElement('div', { className: "fixed inset-0 bg-dark-950 z-50 flex flex-col animate-pop" },
                React.createElement('div', { className: "p-4 flex justify-between bg-dark-900" }, React.createElement('button',{onClick:back},React.createElement(ChevronRight)), React.createElement('span',{className:"font-bold text-blue-500"},"DICE"), React.createElement('span',{className:"font-mono text-gold-500"},user.coins)),
                React.createElement('div', { className: "flex-1 flex flex-col items-center justify-center p-6" },
                    React.createElement('div', { className: "text-8xl font-black mb-10 font-mono" }, rolling ? "..." : (result ?? "00")),
                    React.createElement('input', { type: "range", min: 2, max: 98, value: target, onChange: e=>setTarget(Number(e.target.value)), className: "w-full accent-blue-500 mb-4" }),
                    React.createElement('div', { className: "flex justify-between w-full text-sm text-gray-400 mb-8" }, React.createElement('span',{},"Payout: "+(98/target).toFixed(2)+"x"), React.createElement('span',{},"Chance: "+target+"%")),
                    React.createElement('div', { className: "w-full flex gap-4" },
                        React.createElement('input', { type: "number", value: bet, onChange: e=>setBet(Number(e.target.value)), className: "w-24 bg-dark-800 border border-white/10 rounded-xl text-center text-white" }),
                        React.createElement(Button, { full: true, onClick: roll, disabled: rolling }, t('play'))
                    )
                )
            );
        }

        // --- GAME 2: PLINKO ---
        function PlinkoGame({ user, back, showMsg, t }) {
            const cvsRef = useRef(null); const [bet, setBet] = useState(100); const [mode, setMode] = useState('Normal'); const eng = useRef({ balls: [], floaters: [] });
            
            const drop = async () => {
                if (mode === 'Safe' && bet > 10) return showMsg(t('safe_limit'), 'error');
                if(Number(user.coins) < bet) return showMsg(t('no_balance'), 'error');
                await updateDoc(doc(db,"users",user.id),{coins:Number(user.coins)-bet});
                eng.current.balls.push({ x: cvsRef.current.width/2 + (Math.random()*4-2), y: 30, vx: Math.random()*2-1, vy: 0, bet, gameMode: mode, done: false });
            };

            useEffect(() => {
                const cvs=cvsRef.current; if(!cvs) return;
                cvs.width = cvs.offsetWidth; cvs.height = cvs.offsetHeight;
                const ctx=cvs.getContext('2d'); const {width:w, height:h} = cvs;
                const ROWS = 10; const GAP = w / (ROWS + 2); const cx = w / 2;
                const pegs=[]; for(let r=0; r<ROWS; r++) { for(let c=0; c<=r; c++) { pegs.push({x: cx + (c - r/2) * GAP, y: 80 + r * GAP}); }}
                const buckets = [];
                const mults = mode === 'Normal' ? [10, 5, 2, 0.5, 0.2, 0.2, 0.5, 2, 5, 10] : [5, 3, 2, 1.5, 1.3, 1.2, 1.3, 1.5, 2, 3, 5];
                for(let i=0; i<10; i++) buckets.push({ x: cx + (i - 5) * GAP, y: 80 + ROWS * GAP + 20, w: GAP, h: 40, val: mults[i], active: 0 });

                let anim;
                const update=()=>{
                    ctx.clearRect(0,0,w,h);
                    buckets.forEach(b => {
                        if(b.active > 0) b.active--;
                        const color = mode==='Safe' ? '#10b981' : (b.val<1?'#222':(b.val>=3?'#9333ea':'#eab308'));
                        ctx.fillStyle = b.active > 0 ? '#fff' : color;
                        ctx.fillRect(b.x + 2, b.y, b.w - 4, b.h);
                        ctx.fillStyle = '#fff'; ctx.font = 'bold 10px Arial'; ctx.textAlign = 'center'; ctx.fillText(`${b.val}x`, b.x + b.w/2, b.y + 24);
                    });
                    ctx.fillStyle='#fff'; pegs.forEach(p => { ctx.beginPath(); ctx.arc(p.x, p.y, 3, 0, Math.PI*2); ctx.fill(); });
                    eng.current.balls.forEach((b) => {
                        if(b.done) return;
                        b.vy += 0.25; b.vx *= 0.98; b.x += b.vx; b.y += b.vy;
                        pegs.forEach(p => { if(Math.sqrt((b.x-p.x)**2 + (b.y-p.y)**2) < 8) { b.vx = (Math.random()-0.5) * 4; b.vy *= 0.6; b.y -= 2; }});
                        if(b.y > buckets[0].y) {
                            const bIdx = Math.floor((b.x - (cx - 5*GAP)) / GAP);
                            if(bIdx >= 0 && bIdx < 10) {
                                const targetB = buckets[bIdx]; targetB.active = 15; b.done = true;
                                const win = Math.floor(b.bet * targetB.val);
                                updateDoc(doc(db,"users",user.id),{coins: Number(user.coins) + win});
                                const color = win >= b.bet ? '#4ade80' : '#f87171';
                                eng.current.floaters.push({ x: w/2, y: h/2, text: win >= b.bet ? `${t('you_won')} ${win}` : t('you_lost'), color, life: 1.0 });
                            }
                        }
                        ctx.fillStyle = '#FFD700'; ctx.beginPath(); ctx.arc(b.x, b.y, 6, 0, Math.PI*2); ctx.fill();
                    });
                    eng.current.floaters.forEach((f) => { f.y -= 1; f.life -= 0.02; ctx.globalAlpha = Math.max(0, f.life); ctx.fillStyle = f.color; ctx.font = 'bold 20px Cairo'; ctx.fillText(f.text, f.x, f.y); ctx.globalAlpha = 1.0; });
                    eng.current.floaters = eng.current.floaters.filter(f => f.life > 0);
                    eng.current.balls = eng.current.balls.filter(b => !b.done && b.y < h+50);
                    anim = requestAnimationFrame(update);
                }; update(); return () => cancelAnimationFrame(anim);
            }, [user.coins, mode]);

            return React.createElement('div', { className: "fixed inset-0 bg-dark-950 z-50 flex flex-col animate-pop" },
                React.createElement('div', { className: "p-4 flex justify-between bg-dark-900" }, React.createElement('button',{onClick:back},React.createElement(ChevronRight)), React.createElement('span',{className:"font-bold text-purple-500"},"PLINKO"), React.createElement('span',{className:"font-mono text-gold-500"},user.coins)),
                React.createElement('div', { className: "flex justify-center py-2" },
                    React.createElement('div', { className: "bg-dark-800 p-1 rounded-xl flex border border-white/10" },
                        React.createElement('button', { onClick: ()=>setMode('Normal'), className: `px-4 py-1 rounded-lg text-xs font-bold ${mode==='Normal'?'bg-purple-600 text-white':'text-gray-400'}` }, "Normal"),
                        React.createElement('button', { onClick: ()=>setMode('Safe'), className: `px-4 py-1 rounded-lg text-xs font-bold ${mode==='Safe'?'bg-green-600 text-white':'text-gray-400'}` }, "Safe")
                    )
                ),
                React.createElement('div', { className: "flex-1 relative w-full" }, React.createElement('canvas', { ref: cvsRef, className: "w-full h-full block" })),
                React.createElement('div', { className: "p-4 bg-dark-900 border-t border-white/10 flex gap-4" },
                    React.createElement('input', { type: "number", value: bet, onChange: e=>setBet(Number(e.target.value)), className: "w-24 bg-black border border-white/20 rounded-xl text-center text-white" }),
                    React.createElement(Button, { full: true, onClick: drop }, t('play'))
                )
            );
        }

        // --- GAME 3: MINES ---
        function MinesGame({ user, back, showMsg, t }) {
            const [grid, setGrid] = useState(Array(25).fill(null)); const [revealed, setRevealed] = useState(Array(25).fill(false)); const [bet, setBet] = useState(100); const [playing, setPlaying] = useState(false); const [mines, setMines] = useState([]);
            const startGame = async () => {
                if(Number(user.coins)<bet) return showMsg(t('no_balance'),'error');
                await updateDoc(doc(db,"users",user.id),{coins:Number(user.coins)-bet});
                const m = []; while(m.length<3) { const r=Math.floor(Math.random()*25); if(!m.includes(r)) m.push(r); }
                setMines(m); setRevealed(Array(25).fill(false)); setPlaying(true);
            };
            const clickTile = (i) => {
                if(!playing || revealed[i]) return;
                const r = [...revealed]; r[i]=true; setRevealed(r);
                if(mines.includes(i)) { setPlaying(false); setRevealed(Array(25).fill(true)); showMsg(t('you_lose'), 'error'); }
                else if(r.filter((x,j)=>x && !mines.includes(j)).length === 22) cashout();
            };
            const cashout = async () => {
                const w = Math.floor(bet * 1.5); await updateDoc(doc(db,"users",user.id),{coins:Number(user.coins)+w});
                setPlaying(false); showMsg(`${t('you_won')} ${w}`, 'success');
            };
            return React.createElement('div', { className: "fixed inset-0 bg-dark-950 z-50 flex flex-col animate-pop" },
                React.createElement('div', { className: "p-4 flex justify-between bg-dark-900" }, React.createElement('button',{onClick:back},React.createElement(ChevronRight)), React.createElement('span',{className:"font-bold text-emerald-500"},"MINES"), React.createElement('span',{className:"font-mono text-gold-500"},user.coins)),
                React.createElement('div', { className: "flex-1 flex items-center justify-center p-4" },
                    React.createElement('div', { className: "grid grid-cols-5 gap-2 w-full max-w-sm" },
                        Array(25).fill(0).map((_, i) => React.createElement('button', { key: i, onClick: ()=>clickTile(i), disabled:!playing||revealed[i], className: `aspect-square rounded-lg border flex items-center justify-center ${revealed[i] ? (mines.includes(i)?'bg-red-900 border-red-500':'bg-emerald-900 border-emerald-500') : 'bg-dark-800 border-white/10'}` }, revealed[i] && (mines.includes(i)?React.createElement(Bomb,{className:"text-red-500"}):React.createElement(Gem,{className:"text-emerald-500"}))))
                    )
                ),
                React.createElement('div', { className: "p-4 bg-dark-900 flex gap-4" },
                    playing ? React.createElement(Button, { full: true, variant: "green", onClick: cashout }, "CASHOUT") : React.createElement(React.Fragment, null, React.createElement('input',{type:"number", value:bet, onChange:e=>setBet(Number(e.target.value)), className:"w-24 bg-black border border-white/20 rounded-xl text-center text-white"}), React.createElement(Button, { full: true, onClick: startGame }, t('play')))
                )
            );
        }

        // --- GAME 4: WHEEL ---
        function WheelGame({ user, back, showMsg, t }) {
            const [bet, setBet] = useState(100); const [spinning, setSpinning] = useState(false); const [rot, setRot] = useState(0);
            const spin = async () => {
                if(Number(user.coins)<bet) return showMsg(t('no_balance'),'error');
                if(spinning) return;
                setSpinning(true); await updateDoc(doc(db,"users",user.id),{coins:Number(user.coins)-bet});
                const r = Math.random(); 
                const mult = r < 0.5 ? 0 : (r < 0.8 ? 1.5 : (r < 0.95 ? 2 : 5));
                const extraRot = 1080 + (mult===0?0:(mult===1.5?45:(mult===2?90:135))); // Simplified Logic
                setRot(rot + extraRot);
                setTimeout(async () => {
                    const win = Math.floor(bet * mult);
                    if(win > 0) { await updateDoc(doc(db,"users",user.id),{coins:Number(user.coins)+win}); showMsg(`${t('you_won')} ${win}`, 'success'); }
                    setSpinning(false);
                }, 3000);
            };
            return React.createElement('div', { className: "fixed inset-0 bg-dark-950 z-50 flex flex-col animate-pop" },
                React.createElement('div', { className: "p-4 flex justify-between bg-dark-900" }, React.createElement('button',{onClick:back},React.createElement(ChevronRight)), React.createElement('span',{className:"font-bold text-orange-500"},"WHEEL"), React.createElement('span',{className:"font-mono text-gold-500"},user.coins)),
                React.createElement('div', { className: "flex-1 flex items-center justify-center relative overflow-hidden" },
                    React.createElement('div', { className: "absolute top-4 text-gold-500 text-xl font-bold z-10" }, "â–¼"),
                    React.createElement('div', { className: "w-64 h-64 rounded-full border-4 border-gold-500 relative transition-transform duration-[3000ms] ease-out", style: { transform: `rotate(${rot}deg)`, background: 'conic-gradient(#222 0deg 90deg, #eab308 90deg 180deg, #222 180deg 270deg, #eab308 270deg 360deg)' } },
                        React.createElement('div', { className: "absolute inset-0 flex items-center justify-center text-white font-bold" }, "SPIN")
                    )
                ),
                React.createElement('div', { className: "p-4 bg-dark-900 flex gap-4" }, React.createElement('input',{type:"number", value:bet, onChange:e=>setBet(Number(e.target.value)), className:"w-24 bg-black border border-white/20 rounded-xl text-center text-white"}), React.createElement(Button, { full: true, disabled: spinning, onClick: spin }, t('play')))
            );
        }

        // --- WALLET & WITHDRAW ---
        function WalletScreen({ user, showMsg, t, navTo }) {
            return React.createElement('div', { className: "space-y-6 animate-pop" },
                React.createElement('div', { className: "bg-gradient-to-br from-dark-900 to-black p-6 rounded-2xl border border-white/10 text-center shadow-lg" },
                    React.createElement('div', { className: "text-xs text-slate-500 uppercase tracking-widest" }, t('balance')),
                    React.createElement('div', { className: "text-5xl font-mono font-bold text-gold-500 gold-glow" }, `$${Number(user.balance).toFixed(2)}`)
                ),
                React.createElement('div', { className: "grid grid-cols-2 gap-4" },
                    React.createElement(Button, { variant: "green", onClick: ()=>navTo('deposit') }, t('deposit')),
                    React.createElement(Button, { variant: "dark", onClick: ()=>navTo('withdraw') }, t('withdraw'))
                )
            );
        }

        function DepositScreen({ user, showMsg, t, settings, back }) {
            const [tab, setTab] = useState('offers'); const [modal, setModal] = useState(null); const [proof, setProof] = useState('');
            const submit = async () => {
                if(!proof) return showMsg(t('inputs_err'), 'error');
                const finalAmount = modal.offer ? modal.offer.price : modal.amount;
                await addDoc(collection(db, "deposits"), { userId: user.id, username: user.username, amount: finalAmount, method: modal.method, proof, status: 'pending', date: new Date().toISOString() });
                showMsg(t('success')); setModal(null);
            };
            const handleFile = async (e) => { const file = e.target.files[0]; if(file) setProof(await compressImage(file)); };
            return React.createElement('div', { className: "space-y-6 animate-pop" },
                React.createElement('div', { className: "flex justify-between" }, React.createElement('h2', { className: "text-gold-500 font-bold" }, t('deposit')), React.createElement('button', { onClick: back }, React.createElement(X))),
                React.createElement('div', { className: "flex gap-2" }, React.createElement('button',{onClick:()=>setTab('offers'), className:`flex-1 py-2 rounded-lg ${tab==='offers'?'bg-gold-500 text-black':'bg-dark-800'}`},t('offers')), React.createElement('button',{onClick:()=>setTab('calc'), className:`flex-1 py-2 rounded-lg ${tab==='calc'?'bg-gold-500 text-black':'bg-dark-800'}`},"1$ = 1000C")),
                tab === 'offers' && (settings.offers||[]).map((o,i)=>React.createElement('div',{key:i, className:"bg-dark-800 p-4 rounded-xl flex justify-between items-center"}, React.createElement('div',{},React.createElement('div',{className:"font-bold"},o.title),React.createElement('div',{className:"text-xs text-gray-400"},o.desc)), React.createElement('button',{onClick:()=>setModal({type:'offer', offer:o}), className:"bg-gold-500 text-black px-4 py-1 rounded"},`$${o.price}`))),
                tab === 'calc' && React.createElement('div',{className:"bg-dark-800 p-4 rounded-xl space-y-4"}, React.createElement(Input,{placeholder:"Amount $", id:"calc_amt"}), React.createElement(Button,{full:true, onClick:()=>{const a=document.getElementById('calc_amt').value; if(a) setModal({type:'calc', amount:a});}}, t('deposit'))),
                modal && React.createElement('div', { className: "fixed inset-0 bg-black/90 z-[60] flex items-center justify-center p-6" },
                    React.createElement('div', { className: "bg-dark-900 w-full max-w-sm rounded-2xl p-6 space-y-4" },
                        React.createElement('div', { className: "flex justify-between" }, React.createElement('h3', { className: "font-bold" }, t('payment_info')), React.createElement('button', { onClick: ()=>setModal(null) }, React.createElement(X))),
                        !modal.method ? ['CashPlus', 'PayPal', 'Attijari', 'Binance'].map(m => React.createElement('button', { key: m, onClick: ()=>setModal({...modal, method: m}), className: "w-full p-3 bg-dark-800 rounded-lg mb-2 text-left" }, m))
                        : React.createElement('div', { className: "space-y-4" }, React.createElement('div', { className: "bg-black/50 p-3 rounded text-sm font-mono" }, "Send To: " + (settings.payments?.[modal.method] || "Contact Admin")), React.createElement('label', { className: "block w-full p-4 border-2 border-dashed border-gray-600 rounded-xl text-center cursor-pointer" }, React.createElement('input', { type: "file", className: "hidden", onChange: handleFile }), proof ? "Image Ready" : t('upload_proof')), React.createElement(Button, { full: true, onClick: submit }, t('confirm')))
                    )
                )
            );
        }

        function WithdrawScreen({ user, showMsg, t, back }) {
            const [method, setMethod] = useState(''); const [amt, setAmt] = useState(''); const [info, setInfo] = useState({});
            const submit = async () => {
                if(!amt || !method) return showMsg(t('inputs_err'), 'error');
                if(Number(user.balance) < Number(amt)) return showMsg(t('no_balance'), 'error');
                let details = "";
                if(method === 'Mobile') details = `${info.net} - ${info.ph}`;
                else details = info.val;
                await addDoc(collection(db, "withdrawals"), { userId: user.id, username: user.username, amount: amt, method, details, status: 'pending', date: new Date().toISOString() });
                await updateDoc(doc(db,"users",user.id),{balance:Number(user.balance)-Number(amt)});
                showMsg(t('success')); back();
            };
            return React.createElement('div', { className: "space-y-6 animate-pop" },
                React.createElement('div', { className: "flex justify-between" }, React.createElement('h2', { className: "text-gold-500 font-bold" }, t('withdraw')), React.createElement('button', { onClick: back }, React.createElement(X))),
                !method ? ['PayPal', '1XBET', 'Mobile', 'Cash Plus', 'Attijari'].map(m => React.createElement('button', { key: m, onClick: ()=>setMethod(m), className: "w-full p-4 bg-dark-800 rounded-xl border border-white/5 mb-2 text-left font-bold" }, m))
                : React.createElement('div', { className: "space-y-4" },
                    React.createElement('h3', { className: "text-lg font-bold" }, method),
                    React.createElement(Input, { type: "number", placeholder: t('amount'), value: amt, onChange: e=>setAmt(e.target.value) }),
                    method === 'Mobile' ? React.createElement(React.Fragment, null,
                        React.createElement('select', { className: "w-full bg-dark-900 p-4 rounded-xl border border-white/10", onChange: e=>setInfo({...info, net:e.target.value}) }, React.createElement('option',{},t('network')), React.createElement('option',{value:"IAM"},"IAM"), React.createElement('option',{value:"Orange"},"Orange"), React.createElement('option',{value:"Inwi"},"Inwi")),
                        React.createElement(Input, { placeholder: t('phone_num'), onChange: e=>setInfo({...info, ph:e.target.value}) })
                    ) : React.createElement(Input, { placeholder: method==='PayPal'?'Email':t('account_id'), onChange: e=>setInfo({...info, val:e.target.value}) }),
                    React.createElement(Button, { full: true, onClick: submit }, t('confirm'))
                )
            );
        }

        function AdminPanel({ user, logout, db }) {
            const [tab, setTab] = useState('deposits');
            const [data, setData] = useState({ deposits: [], withdrawals: [] });
            useEffect(() => { 
                const q1 = onSnapshot(collection(db, "deposits"), s => setData(prev => ({ ...prev, deposits: s.docs.map(d=>({id:d.id, ...d.data()})) })));
                const q2 = onSnapshot(collection(db, "withdrawals"), s => setData(prev => ({ ...prev, withdrawals: s.docs.map(d=>({id:d.id, ...d.data()})) })));
                return () => { q1(); q2(); };
            }, []);
            const updateStatus = (col, id, status, amount, userId) => {
                updateDoc(doc(db, col, id), { status });
                if(status === 'approved' && col === 'deposits') {
                    getDoc(doc(db, "users", userId)).then(u => { updateDoc(doc(db, "users", userId), { coins: Number(u.data().coins) + Number(amount)*1000 }); });
                }
            };
            return React.createElement('div', { className: "min-h-screen bg-dark-950 p-4 space-y-4" },
                React.createElement('div', { className: "flex justify-between" }, React.createElement('h1', { className: "text-gold-500 font-bold" }, "ADMIN"), React.createElement('button', { onClick: logout }, "Exit")),
                React.createElement('div', { className: "flex gap-2" }, ['deposits', 'withdrawals'].map(k => React.createElement('button', { key: k, onClick: ()=>setTab(k), className: `px-4 py-2 rounded-lg capitalize ${tab===k?'bg-gold-500 text-black':'bg-dark-800'}` }, k))),
                data[tab].map(d => React.createElement('div', { key: d.id, className: "bg-dark-800 p-4 rounded-xl border border-white/5 mb-2" },
                    React.createElement('div', { className: "flex justify-between" }, React.createElement('span', { className: "font-bold" }, d.username), React.createElement('span', { className: "text-gold-500" }, `$${d.amount}`)),
                    d.proof && React.createElement('img', { src: d.proof, className: "w-full h-32 object-cover rounded mt-2 border border-white/10" }),
                    d.details && React.createElement('div', { className: "text-sm text-gray-400 mt-1" }, d.details),
                    React.createElement('div', { className: "flex gap-2 mt-2" },
                        d.status === 'pending' ? React.createElement(React.Fragment, null, React.createElement('button', { onClick: ()=>updateStatus(tab, d.id, 'approved', d.amount, d.userId), className: "flex-1 bg-green-600 py-1 rounded" }, "Approve"), React.createElement('button', { onClick: ()=>updateStatus(tab, d.id, 'rejected'), className: "flex-1 bg-red-600 py-1 rounded" }, "Reject")) : React.createElement('span', { className: `text-xs uppercase font-bold ${d.status==='approved'?'text-green-500':'text-red-500'}` }, d.status)
                    )
                ))
            );
        }

        function HistoryScreen({ user, t }) { return React.createElement('div', { className: "text-center text-gray-500 mt-10" }, "No History"); }
        function SettingsScreen({ user, showMsg, t }) {
            const [pass, setPass] = useState({ old: '', new: '' });
            const changePass = async () => { if(pass.old !== user.password) return showMsg("Error", "error"); await updateDoc(doc(db,"users",user.id), { password: pass.new }); showMsg(t('success')); };
            return React.createElement('div', { className: "space-y-6" }, React.createElement('h2', { className: "text-gold-500 font-bold" }, t('settings')), React.createElement(Input, { placeholder: t('old_pass'), onChange: e=>setPass({...pass, old:e.target.value}) }), React.createElement(Input, { placeholder: t('new_pass'), onChange: e=>setPass({...pass, new:e.target.value}) }), React.createElement(Button, { full: true, onClick: changePass }, t('confirm')));
        }

        const root = createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>
